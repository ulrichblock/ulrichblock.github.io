{"componentChunkName":"component---src-templates-tag-tsx","path":"/tags/nginx/","result":{"data":{"site":{"siteMetadata":{"title":"Ulrich Block","author":"Ulrich Block","labels":[{"tag":"react","tech":"React","name":"M12 9.861A2.139 2.139 0 1 0 12 14.139 2.139 2.139 0 1 0 12 9.861zM6.008 16.255l-.472-.12C2.018 15.246 0 13.737 0 11.996s2.018-3.25 5.536-4.139l.472-.119.133.468a23.53 23.53 0 0 0 1.363 3.578l.101.213-.101.213a23.307 23.307 0 0 0-1.363 3.578l-.133.467zM5.317 8.95c-2.674.751-4.315 1.9-4.315 3.046 0 1.145 1.641 2.294 4.315 3.046a24.95 24.95 0 0 1 1.182-3.046A24.752 24.752 0 0 1 5.317 8.95zM17.992 16.255l-.133-.469a23.357 23.357 0 0 0-1.364-3.577l-.101-.213.101-.213a23.42 23.42 0 0 0 1.364-3.578l.133-.468.473.119c3.517.889 5.535 2.398 5.535 4.14s-2.018 3.25-5.535 4.139l-.473.12zm-.491-4.259c.48 1.039.877 2.06 1.182 3.046 2.675-.752 4.315-1.901 4.315-3.046 0-1.146-1.641-2.294-4.315-3.046a24.788 24.788 0 0 1-1.182 3.046zM5.31 8.945l-.133-.467C4.188 4.992 4.488 2.494 6 1.622c1.483-.856 3.864.155 6.359 2.716l.34.349-.34.349a23.552 23.552 0 0 0-2.422 2.967l-.135.193-.235.02a23.657 23.657 0 0 0-3.785.61l-.472.119zm1.896-6.63c-.268 0-.505.058-.705.173-.994.573-1.17 2.565-.485 5.253a25.122 25.122 0 0 1 3.233-.501 24.847 24.847 0 0 1 2.052-2.544c-1.56-1.519-3.037-2.381-4.095-2.381zM16.795 22.677c-.001 0-.001 0 0 0-1.425 0-3.255-1.073-5.154-3.023l-.34-.349.34-.349a23.53 23.53 0 0 0 2.421-2.968l.135-.193.234-.02a23.63 23.63 0 0 0 3.787-.609l.472-.119.134.468c.987 3.484.688 5.983-.824 6.854a2.38 2.38 0 0 1-1.205.308zm-4.096-3.381c1.56 1.519 3.037 2.381 4.095 2.381h.001c.267 0 .505-.058.704-.173.994-.573 1.171-2.566.485-5.254a25.02 25.02 0 0 1-3.234.501 24.674 24.674 0 0 1-2.051 2.545zM18.69 8.945l-.472-.119a23.479 23.479 0 0 0-3.787-.61l-.234-.02-.135-.193a23.414 23.414 0 0 0-2.421-2.967l-.34-.349.34-.349C14.135 1.778 16.515.767 18 1.622c1.512.872 1.812 3.37.824 6.855l-.134.468zM14.75 7.24c1.142.104 2.227.273 3.234.501.686-2.688.509-4.68-.485-5.253-.988-.571-2.845.304-4.8 2.208A24.849 24.849 0 0 1 14.75 7.24zM7.206 22.677A2.38 2.38 0 0 1 6 22.369c-1.512-.871-1.812-3.369-.823-6.854l.132-.468.472.119c1.155.291 2.429.496 3.785.609l.235.02.134.193a23.596 23.596 0 0 0 2.422 2.968l.34.349-.34.349c-1.898 1.95-3.728 3.023-5.151 3.023zm-1.19-6.427c-.686 2.688-.509 4.681.485 5.254.987.563 2.843-.305 4.8-2.208a24.998 24.998 0 0 1-2.052-2.545 24.976 24.976 0 0 1-3.233-.501zM12 16.878c-.823 0-1.669-.036-2.516-.106l-.235-.02-.135-.193a30.388 30.388 0 0 1-1.35-2.122 30.354 30.354 0 0 1-1.166-2.228l-.1-.213.1-.213a30.3 30.3 0 0 1 1.166-2.228c.414-.716.869-1.43 1.35-2.122l.135-.193.235-.02a29.785 29.785 0 0 1 5.033 0l.234.02.134.193a30.006 30.006 0 0 1 2.517 4.35l.101.213-.101.213a29.6 29.6 0 0 1-2.517 4.35l-.134.193-.234.02c-.847.07-1.694.106-2.517.106zm-2.197-1.084c1.48.111 2.914.111 4.395 0a29.006 29.006 0 0 0 2.196-3.798 28.585 28.585 0 0 0-2.197-3.798 29.031 29.031 0 0 0-4.394 0 28.477 28.477 0 0 0-2.197 3.798 29.114 29.114 0 0 0 2.197 3.798z","size":20,"color":"deepskyblue","viewBox":null},{"tag":"nodejs","tech":"Node.js","name":"M11.177 25.3a1.94 1.94 0 0 1-.969-.259l-3.086-1.826c-.46-.257-.235-.349-.083-.402.614-.213.739-.262 1.394-.635.069-.038.159-.024.231.018l2.37 1.407a.304.304 0 0 0 .287 0l9.241-5.333a.292.292 0 0 0 .141-.25V7.355a.3.3 0 0 0-.143-.255l-9.237-5.329a.29.29 0 0 0-.285 0L1.803 7.102a.296.296 0 0 0-.146.253v10.666c0 .102.056.198.145.247l2.532 1.462c1.374.687 2.215-.122 2.215-.935V8.265c0-.149.12-.266.269-.266H7.99c.146 0 .267.117.267.266v10.53c0 1.833-.998 2.885-2.736 2.885-.534 0-.955 0-2.129-.579L.969 19.706A1.953 1.953 0 0 1 0 18.02V7.355c0-.693.371-1.339.969-1.684l9.242-5.34a2.023 2.023 0 0 1 1.942 0l9.241 5.34c.599.346.971.992.971 1.684V18.02c0 .693-.372 1.337-.971 1.686l-9.241 5.335a1.942 1.942 0 0 1-.973.259zm2.855-7.348c-4.045 0-4.892-1.857-4.892-3.414 0-.148.118-.266.266-.266h1.195c.133 0 .245.096.265.226.18 1.216.717 1.831 3.164 1.831 1.946 0 2.775-.441 2.775-1.473 0-.596-.234-1.037-3.26-1.334-2.528-.25-4.093-.809-4.093-2.831 0-1.865 1.572-2.977 4.207-2.977 2.961 0 4.425 1.027 4.611 3.233a.27.27 0 0 1-.267.291h-1.2a.266.266 0 0 1-.259-.209c-.288-1.28-.988-1.689-2.886-1.689-2.126 0-2.373.74-2.373 1.295 0 .673.292.869 3.161 1.248 2.84.375 4.19.907 4.19 2.902 0 2.014-1.678 3.167-4.606 3.167z","size":20,"color":"lightgreen","viewBox":"0 0 24 24"},{"tag":"git","tech":"Git","name":"M23.546 10.93L13.067.452c-.604-.603-1.582-.603-2.188 0L8.708 2.627l2.76 2.76c.645-.215 1.379-.07 1.889.441.516.515.658 1.258.438 1.9l2.658 2.66c.645-.223 1.387-.078 1.9.435.721.72.721 1.884 0 2.604-.719.719-1.881.719-2.6 0-.539-.541-.674-1.337-.404-1.996L12.86 8.955v6.525c.176.086.342.203.488.348.713.721.713 1.883 0 2.6-.719.721-1.889.721-2.609 0-.719-.719-.719-1.879 0-2.598.182-.18.387-.316.605-.406V8.835c-.217-.091-.424-.222-.6-.401-.545-.545-.676-1.342-.396-2.009L7.636 3.7.45 10.881c-.6.605-.6 1.584 0 2.189l10.48 10.477c.604.604 1.582.604 2.186 0l10.43-10.43c.605-.603.605-1.582 0-2.187","size":20,"color":"white","viewBox":"0 0 24 24"},{"tag":"github","tech":"GitHub","name":"M8 0C3.58 0 0 3.58 0 8C0 11.54 2.29 14.53 5.47 15.59C5.87 15.66 6.02 15.42 6.02 15.21C6.02 15.02 6.01 14.39 6.01 13.72C4 14.09 3.48 13.23 3.32 12.78C3.23 12.55 2.84 11.84 2.5 11.65C2.22 11.5 1.82 11.13 2.49 11.12C3.12 11.11 3.57 11.7 3.72 11.94C4.44 13.15 5.59 12.81 6.05 12.6C6.12 12.08 6.33 11.73 6.56 11.53C4.78 11.33 2.92 10.64 2.92 7.58C2.92 6.71 3.23 5.99 3.74 5.43C3.66 5.23 3.38 4.41 3.82 3.31C3.82 3.31 4.49 3.1 6.02 4.13C6.66 3.95 7.34 3.86 8.02 3.86C8.7 3.86 9.38 3.95 10.02 4.13C11.55 3.09 12.22 3.31 12.22 3.31C12.66 4.41 12.38 5.23 12.3 5.43C12.81 5.99 13.12 6.7 13.12 7.58C13.12 10.65 11.25 11.33 9.47 11.53C9.76 11.78 10.01 12.26 10.01 13.01C10.01 14.08 10 14.94 10 15.21C10 15.42 10.15 15.67 10.55 15.59C13.71 14.53 16 11.53 16 8C16 3.58 12.42 0 8 0Z","size":20,"color":"white","viewBox":"0 0 16 15"},{"tag":"javascript","tech":"JavaScript","name":"M0 0h24v24H0V0zm22.034 18.276c-.175-1.095-.888-2.015-3.003-2.873-.736-.345-1.554-.585-1.797-1.14-.091-.33-.105-.51-.046-.705.15-.646.915-.84 1.515-.66.39.12.75.42.976.9 1.034-.676 1.034-.676 1.755-1.125-.27-.42-.404-.601-.586-.78-.63-.705-1.469-1.065-2.834-1.034l-.705.089c-.676.165-1.32.525-1.71 1.005-1.14 1.291-.811 3.541.569 4.471 1.365 1.02 3.361 1.244 3.616 2.205.24 1.17-.87 1.545-1.966 1.41-.811-.18-1.26-.586-1.755-1.336l-1.83 1.051c.21.48.45.689.81 1.109 1.74 1.756 6.09 1.666 6.871-1.004.029-.09.24-.705.074-1.65l.046.067zm-8.983-7.245h-2.248c0 1.938-.009 3.864-.009 5.805 0 1.232.063 2.363-.138 2.711-.33.689-1.18.601-1.566.48-.396-.196-.597-.466-.83-.855-.063-.105-.11-.196-.127-.196l-1.825 1.125c.305.63.75 1.172 1.324 1.517.855.51 2.004.675 3.207.405.783-.226 1.458-.691 1.811-1.411.51-.93.402-2.07.397-3.346.012-2.054 0-4.109 0-6.179l.004-.056z","size":20,"color":"yellow","viewBox":"0 0 24 24"},{"tag":"typescript","tech":"TypeScript","name":"M87.7 200.7V217h52v148h36.9V217h52v-16c0-9 0-16.3-.4-16.5 0-.3-31.7-.4-70.2-.4l-70 .3v16.4l-.3-.1zM321.4 184c10.2 2.4 18 7 25 14.3 3.7 4 9.2 11 9.6 12.8 0 .6-17.3 12.3-27.8 18.8-.4.3-2-1.4-3.6-4-5.2-7.4-10.5-10.6-18.8-11.2-12-.8-20 5.5-20 16 0 3.2.6 5 1.8 7.6 2.7 5.5 7.7 8.8 23.2 15.6 28.6 12.3 41 20.4 48.5 32 8.5 13 10.4 33.4 4.7 48.7-6.4 16.7-22 28-44.3 31.7-7 1.2-23 1-30.5-.3-16-3-31.3-11-40.7-21.3-3.7-4-10.8-14.7-10.4-15.4l3.8-2.4 15-8.7 11.3-6.6 2.6 3.5c3.3 5.2 10.7 12.2 15 14.6 13 6.7 30.4 5.8 39-2 3.7-3.4 5.3-7 5.3-12 0-4.6-.7-6.7-3-10.2-3.2-4.4-9.6-8-27.6-16-20.7-8.8-29.5-14.4-37.7-23-4.7-5.2-9-13.3-11-20-1.5-5.8-2-20-.6-25.7 4.3-20 19.4-34 41-38 7-1.4 23.5-.8 30.4 1l-.2.2z","size":20,"color":"white","viewBox":"0 50 400 300"},{"tag":"css","tech":"CSS","name":"M1.5 0h21l-1.91 21.563L11.977 24l-8.565-2.438L1.5 0zm17.09 4.413L5.41 4.41l.213 2.622 10.125.002-.255 2.716h-6.64l.24 2.573h6.182l-.366 3.523-2.91.804-2.956-.81-.188-2.11h-2.61l.29 3.855L12 19.288l5.373-1.53L18.59 4.414z","size":20,"color":"teal","viewBox":"0 0 24 24"},{"tag":"python","tech":"Python","name":"M14.31.18l.9.2.73.26.59.3.45.32.34.34.25.34.16.33.1.3.04.26.02.2-.01.13V8.5l-.05.63-.13.55-.21.46-.26.38-.3.31-.33.25-.35.19-.35.14-.33.1-.3.07-.26.04-.21.02H8.83l-.69.05-.59.14-.5.22-.41.27-.33.32-.27.35-.2.36-.15.37-.1.35-.07.32-.04.27-.02.21v3.06H3.23l-.21-.03-.28-.07-.32-.12-.35-.18-.36-.26-.36-.36-.35-.46-.32-.59-.28-.73-.21-.88-.14-1.05L0 11.97l.06-1.22.16-1.04.24-.87.32-.71.36-.57.4-.44.42-.33.42-.24.4-.16.36-.1.32-.05.24-.01h.16l.06.01h8.16v-.83H6.24l-.01-2.75-.02-.37.05-.34.11-.31.17-.28.25-.26.31-.23.38-.2.44-.18.51-.15.58-.12.64-.1.71-.06.77-.04.84-.02 1.27.05 1.07.13zm-6.3 1.98l-.23.33-.08.41.08.41.23.34.33.22.41.09.41-.09.33-.22.23-.34.08-.41-.08-.41-.23-.33-.33-.22-.41-.09-.41.09-.33.22zM21.1 6.11l.28.06.32.12.35.18.36.27.36.35.35.47.32.59.28.73.21.88.14 1.04.05 1.23-.06 1.23-.16 1.04-.24.86-.32.71-.36.57-.4.45-.42.33-.42.24-.4.16-.36.09-.32.05-.24.02-.16-.01h-8.22v.82h5.84l.01 2.76.02.36-.05.34-.11.31-.17.29-.25.25-.31.24-.38.2-.44.17-.51.15-.58.13-.64.09-.71.07-.77.04-.84.01-1.27-.04-1.07-.14-.9-.2-.73-.25-.59-.3-.45-.33-.34-.34-.25-.34-.16-.33-.1-.3-.04-.25-.02-.2.01-.13v-5.34l.05-.64.13-.54.21-.46.26-.38.3-.32.33-.24.35-.2.35-.14.33-.1.3-.06.26-.04.21-.02.13-.01h5.84l.69-.05.59-.14.5-.21.41-.28.33-.32.27-.35.2-.36.15-.36.1-.35.07-.32.04-.28.02-.21V6.07h2.09l.14.01.21.03zm-6.47 14.25l-.23.33-.08.41.08.41.23.33.33.23.41.08.41-.08.33-.23.23-.33.08-.41-.08-.41-.23-.33-.33-.23-.41-.08-.41.08-.33.23z","size":20,"color":"deepskyblue","viewBox":null},{"tag":"ruby","tech":"Ruby","name":"M20.156.083c3.033.525 3.893 2.598 3.829 4.77L24 4.822 22.635 22.71 4.89 23.926h.016C3.433 23.864.15 23.729 0 19.139l1.645-3 2.819 6.586.503 1.172 2.805-9.144-.03.007.016-.03 9.255 2.956-1.396-5.431-.99-3.9 8.82-.569-.615-.51L16.5 2.114 20.159.073l-.003.01zM0 19.089v.026-.029.003zM5.13 5.073c3.561-3.533 8.157-5.621 9.922-3.84 1.762 1.777-.105 6.105-3.673 9.636-3.563 3.532-8.103 5.734-9.864 3.957-1.766-1.777.045-6.217 3.612-9.75l.003-.003z","size":20,"color":"crimson","viewBox":null},{"tag":"java","tech":"Java","name":"M8.851 18.56s-.917.534.653.714c1.902.218 2.874.187 4.969-.211 0 0 .552.346 1.321.646-4.699 2.013-10.633-.118-6.943-1.149M8.276 15.933s-1.028.761.542.924c2.032.209 3.636.227 6.413-.308 0 0 .384.389.987.602-5.679 1.661-12.007.13-7.942-1.218M13.116 11.475c1.158 1.333-.304 2.533-.304 2.533s2.939-1.518 1.589-3.418c-1.261-1.772-2.228-2.652 3.007-5.688 0-.001-8.216 2.051-4.292 6.573M19.33 20.504s.679.559-.747.991c-2.712.822-11.288 1.069-13.669.033-.856-.373.75-.89 1.254-.998.527-.114.828-.093.828-.093-.953-.671-6.156 1.317-2.643 1.887 9.58 1.553 17.462-.7 14.977-1.82M9.292 13.21s-4.362 1.036-1.544 1.412c1.189.159 3.561.123 5.77-.062 1.806-.152 3.618-.477 3.618-.477s-.637.272-1.098.587c-4.429 1.165-12.986.623-10.522-.568 2.082-1.006 3.776-.892 3.776-.892M17.116 17.584c4.503-2.34 2.421-4.589.968-4.285-.355.074-.515.138-.515.138s.132-.207.385-.297c2.875-1.011 5.086 2.981-.928 4.562 0-.001.07-.062.09-.118M14.401 0s2.494 2.494-2.365 6.33c-3.896 3.077-.888 4.832-.001 6.836-2.274-2.053-3.943-3.858-2.824-5.539 1.644-2.469 6.197-3.665 5.19-7.627M9.734 23.924c4.322.277 10.959-.153 11.116-2.198 0 0-.302.775-3.572 1.391-3.688.694-8.239.613-10.937.168 0-.001.553.457 3.393.639","size":20,"color":"wheat","viewBox":null},{"tag":"angular","tech":"Angular","name":"M9.93 12.645h4.134L11.996 7.74M11.996.009L.686 3.988l1.725 14.76 9.585 5.243 9.588-5.238L23.308 3.99 11.996.01zm7.058 18.297h-2.636l-1.42-3.501H8.995l-1.42 3.501H4.937l7.06-15.648 7.057 15.648z","size":20,"color":"red","viewBox":null},{"tag":"html","tech":"HTML","name":"M1.5 0h21l-1.91 21.563L11.977 24l-8.564-2.438L1.5 0zm7.031 9.75l-.232-2.718 10.059.003.23-2.622L5.412 4.41l.698 8.01h9.126l-.326 3.426-2.91.804-2.955-.81-.188-2.11H6.248l.33 4.171L12 19.351l5.379-1.443.744-8.157H8.531z","size":20,"color":"darkorange","viewBox":"0 0 24 24"},{"tag":"php","tech":"PHP","name":"M7.01 10.207h-.944l-.515 2.648h.838c.556 0 .97-.105 1.242-.314.272-.21.455-.559.55-1.049.092-.47.05-.802-.124-.995-.175-.193-.523-.29-1.047-.29zM12 5.688C5.373 5.688 0 8.514 0 12s5.373 6.313 12 6.313S24 15.486 24 12c0-3.486-5.373-6.312-12-6.312zm-3.26 7.451c-.261.25-.575.438-.917.551-.336.108-.765.164-1.285.164H5.357l-.327 1.681H3.652l1.23-6.326h2.65c.797 0 1.378.209 1.744.628.366.418.476 1.002.33 1.752a2.836 2.836 0 0 1-.305.847c-.143.255-.33.49-.561.703zm4.024.715l.543-2.799c.063-.318.039-.536-.068-.651-.107-.116-.336-.174-.687-.174H11.46l-.704 3.625H9.388l1.23-6.327h1.367l-.327 1.682h1.218c.767 0 1.295.134 1.586.401s.378.7.263 1.299l-.572 2.944h-1.389zm7.597-2.265a2.782 2.782 0 0 1-.305.847c-.143.255-.33.49-.561.703a2.44 2.44 0 0 1-.917.551c-.336.108-.765.164-1.286.164h-1.18l-.327 1.682h-1.378l1.23-6.326h2.649c.797 0 1.378.209 1.744.628.366.417.477 1.001.331 1.751zM17.766 10.207h-.943l-.516 2.648h.838c.557 0 .971-.105 1.242-.314.272-.21.455-.559.551-1.049.092-.47.049-.802-.125-.995s-.524-.29-1.047-.29z","size":20,"color":"violet","viewBox":"0 0 24 24"},{"tag":"mongodb","tech":"MongoDB","name":"M17.18 9.518c-1.263-5.56-4.242-7.387-4.562-8.086C12.266.939 11.885 0 11.885 0c-.002.019-.004.031-.005.049v.013h-.001c-.002.015-.003.025-.004.039v.015h-.002c0 .01-.002.018-.002.026v.026h-.003c-.001.008-.001.018-.003.025v.021h-.002c0 .007 0 .015-.002.021v.02h-.002c0 .01-.001.022-.002.032v.002c-.003.017-.006.034-.009.05v.008h-.002c-.001.004-.003.008-.003.012v.017h-.003v.022h-.005v.018h-.005v.021h-.004v.019h-.004v.017h-.006v.014h-.004v.018h-.004v.014h-.005v.013H11.8v.015h-.004c-.001.001-.001.003-.001.004v.01h-.003c-.001.002-.001.004-.001.006v.006h-.002c-.001.003-.002.008-.002.01-.003.007-.007.014-.01.021v.002c-.002.002-.004.005-.005.007v.008h-.004v.008h-.005v.008h-.003v.01h-.006v.014h-.004v.004h-.004v.008h-.004v.011h-.004v.008h-.006v.011h-.004v.008h-.005v.008h-.003v.01h-.005v.008h-.004v.006h-.004v.008h-.006V.76h-.004v.006h-.005v.008h-.004v.011h-.005v.004h-.003v.008h-.006v.004h-.004v.01h-.004v.004h-.004v.008h-.005v.006h-.003l-.002.004v.004h-.002c-.001.002-.002.002-.002.004v.001h-.001c-.001.003-.002.005-.004.007v.003h-.001c-.005.006-.008.012-.012.018v.001c-.002.002-.007.006-.009.01v.002h-.001c-.001.001-.003.002-.003.003v.003h-.002l-.003.003v.001h-.001c0 .001-.002.002-.003.004v.004h-.003l-.002.002v.002h-.002c0 .002-.002.002-.002.003v.003h-.004c0 .001-.001.002-.002.003V.92h-.003v.004h-.004V.93h-.004v.008h-.005V.93h-.005v.004h-.004V.94h-.005v.008h-.005v.004h-.004v.006h-.004v.004h-.004V.97h-.006v.004h-.004V.98h-.005v.004h-.004v.005h-.005v.01h-.002v.004h-.006v.005h-.004v.002h-.004v.004h-.005v.01h-.004v.004h-.005v.004h-.004v.006h-.005v.004h-.005v.004h-.004v.004h-.004v.01h-.004v.005h-.006v.004h-.004v.004h-.005v.006h-.004v.004h-.005v.007h-.004v.004h-.006V1.1h-.002v.004h-.004v.004h-.005v.004h-.004v.006h-.005v.004h-.003c-.001.001-.001.002-.001.002v.002h-.002l-.004.004s-.002.002-.004.003v.006h-.004v.005h-.004v.004h-.004v.004h-.003l-.003.003v.003h-.002l-.002.002v.003h-.002c-.005.006-.007.01-.014.016-.002.002-.008.007-.012.01-.012.008-.027.021-.039.032-.008.005-.016.012-.022.017v.001h-.001c-.016.013-.031.025-.049.039v.001c-.024.02-.047.039-.074.062V1.34h-.002c-.057.047-.117.1-.186.159V1.5h-.001c-.169.148-.37.338-.595.568l-.015.015-.004.004C9 3.494 6.857 6.426 6.631 11.164c-.02.392-.016.773.006 1.144v.009c.109 1.867.695 3.461 1.428 4.756v.001c.292.516.607.985.926 1.405v.001c1.102 1.455 2.227 2.317 2.514 2.526.441 1.023.4 2.779.4 2.779l.644.215s-.131-1.701.053-2.522c.057-.257.192-.476.349-.662.106-.075.42-.301.797-.645.018-.019.028-.036.044-.054 1.521-1.418 4.362-4.91 3.388-10.599z","size":20,"color":"green","viewBox":null},{"tag":"vscode","tech":"VS Code","name":"M23.15 2.587L18.21.21a1.494 1.494 0 0 0-1.705.29l-9.46 8.63-4.12-3.128a.999.999 0 0 0-1.276.057L.327 7.261A1 1 0 0 0 .326 8.74L3.899 12 .326 15.26a1 1 0 0 0 .001 1.479L1.65 17.94a.999.999 0 0 0 1.276.057l4.12-3.128 9.46 8.63a1.492 1.492 0 0 0 1.704.29l4.942-2.377A1.5 1.5 0 0 0 24 20.06V3.939a1.5 1.5 0 0 0-.85-1.352zm-5.146 14.861L10.826 12l7.178-5.448v10.896z","size":20,"color":"deepskyblue","viewBox":"0 0 24 24"},{"tag":"wordpress","tech":"Wordpress","name":"m5.8465 1.9131c0.57932 0 1.1068 0.222 1.5022 0.58547-0.1938-0.0052-0.3872 0.11-0.3952 0.3738-0.0163 0.5333 0.6377 0.6469 0.2853 1.7196l-0.2915 0.8873-0.7939-2.3386c-0.0123-0.0362 0.002-0.0568 0.0465-0.0568h0.22445c0.011665 0 0.021201-0.00996 0.021201-0.022158v-0.13294c0-0.012193-0.00956-0.022657-0.021201-0.022153-0.42505 0.018587-0.8476 0.018713-1.2676 0-0.0117-0.0005-0.0212 0.01-0.0212 0.0222v0.13294c0 0.012185 0.00954 0.022158 0.021201 0.022158h0.22568c0.050201 0 0.064256 0.016728 0.076091 0.049087l0.3262 0.8921-0.4907 1.4817-0.8066-2.3758c-0.01-0.0298 0.0021-0.0471 0.0308-0.0471h0.25715c0.011661 0 0.021197-0.00996 0.021197-0.022158v-0.13294c0-0.012193-0.00957-0.022764-0.021197-0.022153-0.2698 0.014331-0.54063 0.017213-0.79291 0.019803 0.39589-0.60984 1.0828-1.0134 1.8639-1.0134l-0.0000029-0.0000062zm1.9532 1.1633c0.17065 0.31441 0.26755 0.67464 0.26755 1.0574 0 0.84005-0.46675 1.5712-1.1549 1.9486l0.6926-1.9617c0.1073-0.3036 0.2069-0.7139 0.1947-1.0443h-0.000004zm-1.2097 3.1504c-0.2325 0.0827-0.4827 0.1278-0.7435 0.1278-0.2247 0-0.4415-0.0335-0.6459-0.0955l0.68415-1.9606 0.70524 1.9284v-1e-7zm-1.6938-0.0854c-0.75101-0.35617-1.2705-1.1213-1.2705-2.0075 0-0.32852 0.071465-0.64038 0.19955-0.92096l1.071 2.9285 0.000003-0.000003zm0.95023-4.4367c1.3413 0 2.4291 1.0878 2.4291 2.4291s-1.0878 2.4291-2.4291 2.4291-2.4291-1.0878-2.4291-2.4291 1.0878-2.4291 2.4291-2.4291zm0-0.15354c1.4261 0 2.5827 1.1566 2.5827 2.5827s-1.1566 2.5827-2.5827 2.5827-2.5827-1.1566-2.5827-2.5827 1.1566-2.5827 2.5827-2.5827z","size":20,"color":"green","viewBox":"3.5 1.5 5 5"},{"tag":"graphql","tech":"GraphQL","name":"M14.051 2.751l4.935 2.85c.816-.859 2.173-.893 3.032-.077.148.14.274.301.377.477.589 1.028.232 2.339-.796 2.928-.174.1-.361.175-.558.223v5.699c1.146.273 1.854 1.423 1.58 2.569-.048.204-.127.4-.232.581-.592 1.023-1.901 1.374-2.927.782-.196-.113-.375-.259-.526-.429l-4.905 2.832c.372 1.124-.238 2.335-1.361 2.706-.217.071-.442.108-.67.108-1.181.001-2.139-.955-2.14-2.136 0-.205.029-.41.088-.609l-4.936-2.847c-.816.854-2.171.887-3.026.07-.854-.816-.886-2.171-.07-3.026.283-.297.646-.506 1.044-.603l.001-5.699c-1.15-.276-1.858-1.433-1.581-2.584.047-.198.123-.389.224-.566.592-1.024 1.902-1.374 2.927-.782.177.101.339.228.48.377l4.938-2.85C9.613 1.612 10.26.423 11.39.088 11.587.029 11.794 0 12 0c1.181-.001 2.139.954 2.14 2.134.001.209-.03.418-.089.617zm-.515.877c-.019.021-.037.039-.058.058l6.461 11.19c.026-.009.056-.016.082-.023V9.146c-1.145-.283-1.842-1.442-1.558-2.588.006-.024.012-.049.019-.072l-4.946-2.858zm-3.015.059l-.06-.06-4.946 2.852c.327 1.135-.327 2.318-1.461 2.645-.026.008-.051.014-.076.021v5.708l.084.023 6.461-11.19-.002.001zm2.076.507c-.39.112-.803.112-1.192 0l-6.46 11.189c.294.283.502.645.6 1.041h12.911c.097-.398.307-.761.603-1.044L12.597 4.194zm.986 16.227l4.913-2.838c-.015-.047-.027-.094-.038-.142H5.542l-.021.083 4.939 2.852c.388-.404.934-.653 1.54-.653.627 0 1.19.269 1.583.698z","size":20,"color":"hotpink","viewBox":"0 0 24 24"},{"tag":"gatsby","tech":"Gatsby","name":"M12.001.007C5.326.007.007 5.326.007 12S5.326 23.995 12 23.995s11.994-5.319 11.994-11.994S18.676.007 12.001.007zM2.614 12.105l9.283 9.283c-5.111 0-9.283-4.172-9.283-9.283zm11.473 9.074L2.823 9.915C3.76 5.743 7.516 2.614 12 2.614a9.476 9.476 0 0 1 7.614 3.86L18.259 7.62a7.657 7.657 0 0 0-6.362-3.337A7.555 7.555 0 0 0 4.7 9.393l9.804 9.805c2.4-.835 4.276-2.92 4.798-5.424h-4.068v-1.773h6.154c0 4.485-3.129 8.24-7.301 9.178z","size":20,"color":"rebeccapurple","viewBox":"0 0 24 24"},{"tag":"steam","tech":"Steam","name":"m110.5 87.322c0 0.196 0 0.392 0.01 0.576l-28.508 41.412c-4.618-0.21-9.252 0.6-13.646 2.41-1.937 0.79-3.752 1.76-5.455 2.88l-62.599-25.77c0.00049 0-1.4485 23.83 4.588 41.59l44.254 18.26c2.222 9.93 9.034 18.64 19.084 22.83 16.443 6.87 35.402-0.96 42.242-17.41 1.78-4.3 2.61-8.81 2.49-13.31l40.79-29.15c0.33 0.01 0.67 0.02 1 0.02 24.41 0 44.25-19.9 44.25-44.338 0-24.44-19.84-44.322-44.25-44.322-24.4 0-44.25 19.882-44.25 44.322zm-6.84 83.918c-5.294 12.71-19.9 18.74-32.596 13.45-5.857-2.44-10.279-6.91-12.83-12.24l14.405 5.97c9.363 3.9 20.105-0.54 23.997-9.9 3.904-9.37-0.525-20.13-9.883-24.03l-14.891-6.17c5.746-2.18 12.278-2.26 18.381 0.28 6.153 2.56 10.927 7.38 13.457 13.54s2.52 12.96-0.04 19.1m51.09-54.38c-16.25 0-29.48-13.25-29.48-29.538 0-16.275 13.23-29.529 29.48-29.529 16.26 0 29.49 13.254 29.49 29.529 0 16.288-13.23 29.538-29.49 29.538m-22.09-29.583c0-12.253 9.92-22.191 22.14-22.191 12.23 0 22.15 9.938 22.15 22.191 0 12.254-9.92 22.183-22.15 22.183-12.22 0-22.14-9.929-22.14-22.183z","size":20,"color":"white","viewBox":"10 20 199 199"},{"tag":"nginx","tech":"Nginx","name":"M22.73015,49.008a3.59488,3.59488,0,0,1-7.18976,0l.00088.00088.00349-24.67727c0-1.91174,1.68924-3.49279,4.08175-3.49279a6.39282,6.39282,0,0,1,4.90021,2.191L25.613,24.32989,40.63124,42.30253V24.432H40.6295a3.59488,3.59488,0,0,1,7.18975,0h-.00087l-.00349,24.67552c0,1.91175-1.69011,3.49279-4.08175,3.49279a6.38857,6.38857,0,0,1-4.90021-2.191L22.7284,31.13659V49.0089Z","size":20,"color":"white","viewBox":"10 15 45 45"},{"tag":"bash","tech":"Bash","name":"","size":20,"color":"white","viewBox":"10 20 199 199"},{"tag":"game-server","tech":"Game Server","name":"","size":20,"color":"white","viewBox":"10 20 199 199"},{"tag":"security","tech":"Security","name":"","size":20,"color":"white","viewBox":"10 20 199 199"},{"tag":"spam","tech":"Spam","name":"","size":20,"color":"white","viewBox":"10 20 199 199"},{"tag":"sql","tech":"SQL","name":"","size":20,"color":"white","viewBox":"10 20 199 199"}]}},"allMarkdownRemark":{"totalCount":11,"edges":[{"node":{"excerpt":"Google hat bereits im letzten Jahr verkündet, dass es in Zukunft eine Verschlüsselung per HTTPS als positiven Ranking Faktor berücksichtigen wird. Dies wird damit begründet, dass Sicherheit oberste…","html":"<p>Google hat bereits im <a href=\"https://www.google.com/events/io?utm_source=wmx_blog&#x26;utm_medium=referral&#x26;utm_campaign=tls_en_post\" target=\"_blank\" rel=\"external noopener noreferrer\">letzten Jahr verkündet</a>, dass es in Zukunft eine Verschlüsselung per HTTPS als positiven Ranking Faktor berücksichtigen wird. Dies wird damit begründet, dass Sicherheit oberste Priorität habe und man dem User, das beste, also sichere Ergebnis präsentieren möchte.<br>\nDas bedeutet, dass bei zwei Inhaltlich gleichwertigen Webseiten, diejenige mit HTTPS vor der anderen als Ergebnis angezeigt wird.</p>\n<p>Gefordert ist leicht, aber was meint Google damit? Wie sieht es mit der Umsetzung aus? Was muss man dabei berücksichtigen? Wie kann man testen, ob seine Umsetzung erfolgreich ist?</p>\n<h2>HTTPS/SSL/TLS</h2>\n<p>HTTPS ist ein Protokoll zur Datenübertragung im Webbrowser. Es dient zur Verschlüsselung der Datenübertragung. Kommt es nicht zum Einsatz, kann ein Angreifer, alles Übertragende, also auch Passwörter mitschneiden. Dabei reicht es aus, dass man sich in einem öffentlichen WLAN befindet, bei dem der Nachbar ein Lauschprogramm gestartet hat.<br>\nBefindet man sich auf einer gesicherten Seite, wie z.B. <a href=\"https://easy-wi.com\" target=\"_blank\" rel=\"external noopener noreferrer\">https://easy-wi.com</a> sieht dies so aus:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 234px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 16%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAsklEQVQI10WPS07DMBiEc/9z0BNwBFagSLAIfUWGUjt2/CfFr3jLh+oFjPQtZqQZabqcM8YYYorE78htCYQUyClTt0ophRgjtVa2bWv+Ti7lL7tvpJxap1NKsds94K2gZM/TxyOf4cLL9Mwwv+Ljgpssfd/zvh+wbuZ8GlD6i+PhyNtw4Id/dVprxnHEWcckVy5yJoSAEYP2V5Z14bauOGcxRuO9IOKZvW+d2Ut7l1Jq/AIUH97UYvA4fwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"easy-wi\"\n        title=\"easy-wi\"\n        src=\"/static/a8609b4e17fa44e2519e375c3fd941a7/7235c/easy-wi.png\"\n        srcset=\"/static/a8609b4e17fa44e2519e375c3fd941a7/772e8/easy-wi.png 200w,\n/static/a8609b4e17fa44e2519e375c3fd941a7/7235c/easy-wi.png 234w\"\n        sizes=\"(max-width: 234px) 100vw, 234px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Wenn die Organisation vom Zertifikat Anbieter verifiziert worden ist, erscheint die Leiste in Grün:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 417px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5952d75f9e82b8e4fc2c7b8fba5aa371/f27fb/deutsche_bank.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAf0lEQVQI1x3HOxKCMBRAUfa/HzuFMLT4IdIZ888bEsZxCdeR4hSnu7uZZ9HoonnkG1o0S36wyspSFuZ0xbY3vjnad6e1hohQ60ZKkVKElCPb9n+i6+2JKSiUGw6jH1C2ZwoTyo+c7QWzG0x7IR+hbhVrHTlnrDX4EIkpHHfO8QMLP46aeLkjNgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"deutsche_bank\"\n        title=\"deutsche_bank\"\n        src=\"/static/5952d75f9e82b8e4fc2c7b8fba5aa371/f27fb/deutsche_bank.png\"\n        srcset=\"/static/5952d75f9e82b8e4fc2c7b8fba5aa371/772e8/deutsche_bank.png 200w,\n/static/5952d75f9e82b8e4fc2c7b8fba5aa371/e17e5/deutsche_bank.png 400w,\n/static/5952d75f9e82b8e4fc2c7b8fba5aa371/f27fb/deutsche_bank.png 417w\"\n        sizes=\"(max-width: 417px) 100vw, 417px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Was muss ich bei meiner Webseite berücksichtigen?</h3>\n<p>HTTPS zu konfigurieren ist hauptsächlich eine Arbeit am (Web)Server. Doch auch an der Webseite muss man ggf. Änderungen vornehmen. So muss man sicherstellen, dass die Standard Url auf <em>https://</em> konfiguriert ist. Bei WordPress macht man dies unter Einstellungen > Allgemein > WordPress-Adresse (URL)/Website-Adresse (URL).</p>\n<p>Je nachdem wie die Webseite aufgebaut ist, muss eventuell zusätzlich man im Quellcode des sicherstellen, dass alle eingebundenen Dateien, wie Javascript, CSS, Bilder ausschließlich über eine Verschlüsselte Verbindung eingebunden werden. Macht man dies nicht, werden diese Inhalte von jedem modernen Browser als Sicherheitsrisiko geblockt.</p>\n<h3>Woher bekomme ich ein Zertifikat?</h3>\n<p>Es gibt nur wenige Zertifikat Autoritäten. Diese werden aber von sehr vielen Resellern vertrieben. Die Preise unterscheiden sich dabei erheblich. Einfache positive Zertifikate können im seltensten Fall kostenlos wie bei <a href=\"http://www.startssl.com/\" target=\"_blank\" rel=\"external noopener noreferrer\">startssl.com</a> beantragt werden. Im Regelfall gehen die Preise zwischen 5-10 US $ bei internationalen Anbietern los. Deutsche Reseller sind oft deutlich teurer.</p>\n<h2>Nginx</h2>\n<h3>Wie richte ich mein Zertifikat ein</h3>\n<p>Je nach Reseller und Anbieter kann der Prozess für die Zertifikat Dateien sehr Unterschiedlich sein. Am Ende wird aber in aller Regel eine Zertifikats (*.crt) und eine Key Datei (*.key) stehen. Als Namen für die Datei verwende ich den Domain Namen. Im Falle von easy-wi.com wären dies dann easy-wi.com.crt und easy-wi.com.key.</p>\n<p>Ich arbeite mit Nginx als Webserver und lege deswegen für die Dateien den Unterordner „ssl\" im Ordner /etc/nginx/ an:<br>\n<code class=\"language-text\">mkdir /etc/nginx/ssl/</code></p>\n<p>In dem zu verschlüsselnden Vhost werden dann die SSL bezogenen Einträge hinzugefügt. Dabei darf es, im Falle von mehreren Vhosts auf dem Server nur einmal der Eintrag „default\" vorkommen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">listen 443 default;\nssl on;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\nssl_prefer_server_ciphers on;\nssl_certificate /etc/nginx/ssl/domain.tld.crt;\nssl_certificate_key /etc/nginx/ssl/domain.tld.key;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nach dem Eintragen den Nginx noch neu starten mit<br>\n<code class=\"language-text\">service nginx restart</code></p>\n<p>und die Webseite sollte nun unter <a href=\"https://domain.tld\" target=\"_blank\" rel=\"external noopener noreferrer\">https://domain.tld</a> erreichbar sein.</p>\n<h3>Redirect von HTTP auf HTTPS</h3>\n<p>Die Webseite/CMS sollte man spätestens jetzt intern auf https umstellen, damit jeder Klick im Menu bzw. die Anweisungen für Suchmaschinen wie die Canonical URL gegen die Verschlüsselten URLs laufen.</p>\n<p>Zusätzlich ist es zu empfehlen das Lauschen auf unverschlüsselte Verbindungen für die Webseite zu deaktivieren und durch einen permanenten Redirect zu ersetzen.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n\tlisten 80;\n\tserver_name www.domain.tld domain.tld;\n\trewrite ^ https://domain.tld$request_uri permanent;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>HTTP Strict Transport Security</h3>\n<p>Man wird im Regelfall nicht um einen Redirect auf Server und Application Ebene herum kommen. Sicherheitstechnisch eröffnet leider nach wie vor einen Angriff durch eine Man in the Middle Attacke. Um diese Gefahr zumindest stark zu reduzieren, wurde HTTP um <em>HTTP Strict Transport Security</em> erweitert. Vereinfacht gesagt, sagt man dem Browser, wenn er das erste mal auf einer HTTPS URL landet, dass er den Benutzer ab nun korrigieren soll. D.h. dass der Browser beim nächsten mal, wenn der User HTTP eingibt, diesen automatisch auf HTTPS.</p>\n<p>Aktivieren kann man es mit einem Einzeiler:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">add_header Strict-Transport-Security \"max-age=15768000; includeSubDomains\";</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>Perfect Forward Security</h3>\n<p>Um das Aufdecken von Sicherheitsschlüsseln zu erschweren hat man in moderneren Webservern die Option <a href=\"http://de.wikipedia.org/wiki/Perfect_Forward_Secrecy\" target=\"_blank\" rel=\"external noopener noreferrer\">Perfect Forward Security</a> zu aktivieren.</p>\n<p>Als erstes erstellt man sich Diffie-Hellman Parameter:<br>\n<code class=\"language-text\">openssl dhparam -out /etc/nginx/ssl/dh4096.pem 4096</code></p>\n<p>Dann erweitert man seine Konfiguration um die Cypher und den Verweis auf die Datei:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 \\\nEECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 \\\nEECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !MEDIUM\";\n# If you want to ignore older browsers like IE8 you could go with:\n# ssl_ciphers \"HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES\";\nssl_dhparam /etc/nginx/ssl/dh4096.pem;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>SSL Session Cache</h3>\n<p>Nun noch den SSL Session Cache aktivieren:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">ssl_session_cache    shared:SSL:10m;\nssl_session_timeout 10m;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>Komplettes Beispiel</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">listen 443 default;\nssl on;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE\nssl_prefer_server_ciphers on;\nssl_certificate /etc/nginx/ssl/domain.tld.crt;\nssl_certificate_key /etc/nginx/ssl/domain.tld.key;\n\nssl_session_cache shared:SSL:10m;\nssl_session_timeout 10m;\nssl_protocols TLSv1 TLSv1.1 TLSv1.2;\nssl_prefer_server_ciphers on;\nssl_ciphers \"EECDH+ECDSA+AESGCM EECDH+aRSA+AESGCM EECDH+ECDSA+SHA384 \\\nEECDH+ECDSA+SHA256 EECDH+aRSA+SHA384 EECDH+aRSA+SHA256 EECDH+aRSA+RC4 \\\nEECDH EDH+aRSA RC4 !aNULL !eNULL !LOW !3DES !MD5 !EXP !PSK !SRP !DSS !MEDIUM\";\n# If you want to ignore older browsers like IE8 you could go with:\n# ssl_ciphers \"HIGH:!aNULL:!MD5 or HIGH:!aNULL:!MD5:!3DES\";\nssl_dhparam /etc/nginx/ssl/dh4096.pem;\n\nadd_header Strict-Transport-Security \"max-age=15768000; includeSubDomains\";</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Wie überprüfe ich, ob meine Arbeit erfolgreich war?</h3>\n<p>Die Einstellungen sind vielfältig. Je nachdem, in welcher Reihenfolge und wo man sie einträgt, kann es passieren, dass sie wieder überschrieben werden. Deswegen sollte man sich nicht auf das Abarbeiten einer Anleitung verlassen, sondern einen Test durchlaufen lassen.</p>\n<p>Zum Testen bietet sich das kostenlose Webtool <a href=\"https://www.ssllabs.com/ssltest/index.html\" target=\"_blank\" rel=\"external noopener noreferrer\">SSL Test von SSL Labs</a> an. Hat man alles richtig gemacht, kann das Ergebnis so aussehen:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 41%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABqUlEQVQoz3WRS0tbYRCG87ME3Ylg8E+4cBUQXRdcdFeaXSF11U03pQS6FLzsCmIbV0Uba3Mj5uRybHKSnO873z1PyUlLkbYD7zADw/POMIUo6tHpdGi32wz6fZrNZt43Gw36g5hR/INpkvC/yMyCifCMU4/UnoJzjrmQpFIyFwKRZQil8vpxpkiEQVuL1PqplEYbTX8sue3OqPdS4pmlsHR5nEzoRRHD0QiRSYRcKcsk8nct1V+SUqFUhtEZmZLAgkIIAakU3gW0NIi5xGmP8w7nPMsLjDMop/4p62w+J5TGh0BhmYzxTE3M++5L3raf8zH+sDRDmQw1VVQfquzd7HFYP2T/6z4H9QNKtyWOvh2R2pRFCGTaEFZAj7fQSr/wqlWi2i/zpvMsBybzBDM1VJqvWbtao1grslXbYru2zcbVBsftYwhgvX0KdBYexD3l+13K33d5132RfzCZTUhjQaVRYf3TOjvXOzmseF1k8/Mml+PLHGi8+QMMv9Z13tITDVrpDYmOWQRQWuG04256x8nghIvRBWfDM86H55wOT4lERHCB5VIr4IKfItRGkXWggrcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ssl_easy-wi\"\n        title=\"ssl_easy-wi\"\n        src=\"/static/7dcd51154ca565e911fafd8658352ea3/5a190/ssl_easy-wi.png\"\n        srcset=\"/static/7dcd51154ca565e911fafd8658352ea3/772e8/ssl_easy-wi.png 200w,\n/static/7dcd51154ca565e911fafd8658352ea3/e17e5/ssl_easy-wi.png 400w,\n/static/7dcd51154ca565e911fafd8658352ea3/5a190/ssl_easy-wi.png 800w,\n/static/7dcd51154ca565e911fafd8658352ea3/2a50c/ssl_easy-wi.png 925w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>","id":"196d2937-b535-57d2-b302-d39906a89324","frontmatter":{"title":"HTTPS und Forward Security mit Nginx","date":"2015-05-10","tags":["nginx"]},"fields":{"slug":"/https-und-forward-security-mit-nginx/"},"timeToRead":5}},{"node":{"excerpt":"In diesem Beitrag möchte ich eine Anleitung geben, wie man WordPress beschleunigen kann. Der Beitrag richtet sich vor allem an Bastler und System Admins. Die Teile, die sich auf PHP-FPM und Testdaten…","html":"<p>In diesem Beitrag möchte ich eine Anleitung geben, wie man WordPress beschleunigen kann. Der Beitrag richtet sich vor allem an Bastler und System Admins. Die Teile, die sich auf PHP-FPM und Testdaten beziehen dienen lediglich als Referenz zum Testen. Sie können allesamt ausgelassen werden.</p>\n<p>Das Endergebnis wird ein gegenüber <a href=\"/mehr-speed-fuer-wordpress-mittels-fullpage-caching-mit-nginx-und-memcached/\" title=\"Mehr Speed für WordPress mittels Fullpage Caching mit Nginx und Memcached\">diesem Beitrag</a> etwas erweiterter Aufbau sein:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 550px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAFDUlEQVRIx42W2W4cVRCGmxfgEgnBC3CRRwCEhIQQSCBFXPAEkbgBKRJEwigLSxAQiIMISCQEAnFiB8hClMhZTBY78RrbieNlHI89M559uqeX6dPdp5cPdfd4bIckUFKpz0yf+k+dqr+qWuEhEkURUbri6oLJ0WEN1ZKdd48TJTF+iMZiO5Luv1V2nKkytmIn/wXhfwIGgN/RKIp13ZOpvMXpsTJChv/Pw3QThGH6bFt11lEgMZuNTWCPA1XUxn5KxZep1bZSLG5F075sGwXtLSG+52wA2hyWfwE2mz2Uy9toNN6lXFJQ1d1t13w8P2SuoDE0nUVtyU1gD8Z77alsRPf9fizrYOf31YxN9zAcHIfDYy6W8HgUKzYlJYy9kQLPg4Y6hG1VmJhb5fvRkO5rOvsH6nw7Av1zNqF0cVwP1/VwXBc/CNIctL1NPPSEha7WIJS4XoQrbG5O3OPwRMT+6y2+GWjQPRxwLWMSSkHgyzhbuKJF6G/2WhnP2Zyc0OkdUxleTrnmST+J13hO8N0tlx9GoHcq9iI1quoOJV0yn68zk61Q1j3ydQs/CFFOT5t82q/yyYUqfZNWYiCEg5RekuGqFjJ57xgr+dfI517CMvdxaKDC+z33+PD4Xbr65unqm6Ord46G6aGcHKvz0ZlVdp0t0jPaTAAdJwaUCWAshv4zy1mF2XvPYOjbuTQf0TPl8uPACgf773Ni0uH4pMAQEmVq1eXUlMHv4w3GcnZyVccRbcBUDHWCMJhN6jsIUuK3jCZ6U8OyLHStThjIDUmxDRzL7ADE2fb9FPDuaovBjElt/TWODDhxc5W5ooX0A45eXSJTEW3aEOEHoKq3yGZfZDHzAsvLXclt58sW+64LvrohOTZuYMex9RzKqsne/hqDixa6Jdh1OsvArLpG7BDfh2bzEoXCc2SzT1CuvEnoQ99wnj1n8+zrX+Wz80VGZpbxPZGExRIxB/0kzjVNT/jYJnba9+LMpqsFKpUDiYfLdYfuQYevhwL+mHYeUiHguolRp2KUtbIxTbMTN01bwLbTjC8UDa7cXqFu6FhmBlUdp1C4QKl0LtF6/SL12kVse2XtylHSA6vVowgRRz5IWplti7WDkS2VYu42enOGSnk7S0sKd6YUMgsK01MKc7MKjca29eYgxGks6z1ipnjtShJCrDeJeZ0/R8v4yQkSz7uJbd9EiFhv4bqDBEExBfS8HFJuwXHexvfHabXOYZpZbOGhazVGFxt8cbnJ55d1LtxpJHX+KEliWCptYWFeYXFR4c60wv1FhVbrHTwJwqpyfbbG3ksaey81OTWpYTQbSN8jisKHAIYoprETVX0eTXuFev0NbHsrUl7ubIobwl8zFr+NaGh2So1WSxCGAtu+SMvuw7J+wXFvr9MmplCcCCHqqOoxTLMHwziCYfQQhQ1810OtlTpeOI5ESoNc7mlyK0+SXXwWvblnLSlrUy8+eYKVldfJLr1FIf8qc7NPUaufSirJk167fUX4fkSzuUirdQTVrJFXfQqahym8jXM53ETY1HMPVyxRLc9SrZQ774MgwrbKZEsW3QM6B67pdF/VOXSjvjZGo851OvO53bruFhzO3LHpHWswMG9i2m4HeHRmiR29GXafzbHzTJ695/IPAj44zQJ+HVH5oG8paaQfn69S0NYBvYCky1/JOFzJCKYL9uapt+nbph2v0azJT0MqhwYbnJpsYgrZzn7ULuL04FThH2otbaTjuHKqAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"wordpress\"\n        title=\"wordpress\"\n        src=\"/static/be44cdf4ab838ddc152763040ce189ee/dd45a/wordpress.png\"\n        srcset=\"/static/be44cdf4ab838ddc152763040ce189ee/772e8/wordpress.png 200w,\n/static/be44cdf4ab838ddc152763040ce189ee/e17e5/wordpress.png 400w,\n/static/be44cdf4ab838ddc152763040ce189ee/dd45a/wordpress.png 550w\"\n        sizes=\"(max-width: 550px) 100vw, 550px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>Wir werden uns zu Nutze machen, dass der Webserver <strong>Nginx</strong> direkt mit dem Key Value Store Memcached kommunizieren kann und wir so gecachte Inhalte aus dem Ram an Nginx ausgeliefern können.</p>\n<p>Des Weiteren werden wir mittels Plugins HTML, Javascript und CSS komprimieren. Im Fall von Javascript und CSS werden die Inhalte in jeweils eine Datei zusammengefasst werden.</p>\n<p>Die Blogsuche wird nicht mehr, wie gewohnt, über den MySQL angebunden, sondern der Suchserver <strong>Elasticsearch</strong> verwendet.</p>\n<p>An Stelle von <strong>MySQL</strong> wird auf die Datenbank <strong>MariaDB</strong> gesetzt werden.</p>\n<p>Letztendlich werden wir auf die klassischen PHP Interpreter verzichten und die, von Facebooks entwickelte, <strong>Hip Hop Virtual Machine</strong> (kurz <strong>HHVM</strong>) zum Ausliefern von PHP verwenden.</p>\n<hr>\n<p>Weiter geht es mit <a href=\"/wordpress-unleashed-testsystem/\" title=\"Wordpress unleashed: Testsystem\">WordPress unleashed: Testsystem</a></p>\n<h3>Alle Teile dieser Serie</h3>\n<ul>\n<li><a href=\"/wordpress-unleashed-konzept/\" title=\"Wordpress unleashed: Konzept\">WordPress unleashed: Konzept</a></li>\n<li><a href=\"/wordpress-unleashed-testsystem/\" title=\"Wordpress unleashed: Testsystem\">WordPress unleashed: Testsystem</a></li>\n<li><a href=\"/wordpress-unleashed-lemp-stack/\" title=\"Wordpress unleashed: LEMP Stack\">WordPress unleashed: LEMP Stack</a></li>\n<li><a href=\"/wordpress-unleashed-datenbank-wordpress/\" title=\"Wordpress unleashed: Datenbank + WordPress\">WordPress unleashed: Datenbank + WordPress</a></li>\n<li><a href=\"/wordpress-unleashed-memcached-cachify/\" title=\"Wordpress unleashed: Memcached + Cachify\">WordPress unleashed: Memcached + Cachify</a></li>\n<li><a href=\"/wordpress-unleashed-autoptimize-js-css/\" title=\"Wordpress unleashed: WordPress unleashed: Autoptimize JS + CSS\">WordPress unleashed: WordPress unleashed: Autoptimize JS + CSS</a></li>\n<li><a href=\"/wordpress-unleashed-elasticsearch/\" title=\"Wordpress unleashed: Elasticsearch\">WordPress unleashed: Elasticsearch</a></li>\n<li><a href=\"/wordpress-unleashed-wordpress-plugins/\" title=\"Wordpress unleashed: WordPress Plugins\">WordPress unleashed: WordPress Plugins</a></li>\n<li><a href=\"/wordpress-unleashed-performance-tests/\" title=\"Wordpress unleashed: Performance Tests\">WordPress unleashed: Performance Tests</a></li>\n<li><a href=\"/wordpress-unleashed-nginx-absichern/\" title=\"Wordpress unleashed: Nginx absichern\">WordPress unleashed: Nginx absichern</a></li>\n</ul>","id":"299795e0-0f28-5de4-a216-1e282164ba1f","frontmatter":{"title":"WordPress unleashed: Konzept","date":"2014-09-09","tags":["wordpress","nginx"]},"fields":{"slug":"/wordpress-unleashed-konzept/"},"timeToRead":1}},{"node":{"excerpt":"NGINX Als erstes installieren wir den Webserver. Zum Einsatz kommt Nginx. Wir werden die NAXSI Variante installieren, damit wir später beim Absichern des Systems, eine Web Application Firewall (WAF…","html":"<h3>NGINX</h3>\n<p>Als erstes installieren wir den Webserver. Zum Einsatz kommt Nginx. Wir werden die <a href=\"https://github.com/nbs-system/naxsi\" target=\"_blank\" rel=\"external noopener noreferrer\">NAXSI</a> Variante installieren, damit wir später beim Absichern des Systems, eine Web Application Firewall (WAF) einrichten können.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> nginx-common nginx-naxsi -y</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nun den Vhost für FPM einrichten, indem man die Datei <strong>/etc/nginx/sites-available/wordpress.fpm</strong> mit folgendem Inhalt anlegt. Dabei muss die IP angepasst werden:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n    listen 192.168.178.47:80;\n\n    root /var/www/wordpress/htdocs;\n    index index.php index.html index.htm;\n\n    access_log /var/www/wordpress/logs/access.log;\n    error_log  /var/www/wordpress/logs/error.log;\n\n    server_name \"\";\n\n    location / {\n        try_files $uri $uri/ /index.php;\n    }\n\n    location ~ \\.php$ {\n        fastcgi_pass unix:/var/run/php5-fpm.sock;\n        fastcgi_index index.php;\n        include fastcgi_params;\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Der Vhost für HHVM, bei dem die IP ebenfalls angepasst werden muss, in der Datei <strong>/etc/nginx/sites-available/wordpress.hhvm</strong> hat den Inhalt</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n    listen 192.168.178.48:80;\n\n    root /var/www/wordpress/htdocs;\n    index index.php index.html index.htm;\n\n    access_log /var/www/wordpress/logs/access.log;\n    error_log  /var/www/wordpress/logs/error.log;\n\n    server_name \"\";\n\n    location / {\n        try_files $uri $uri/ /index.php;\n    }\n\n    location ~ \\.(hh|php)$ {\n        fastcgi_keep_conn on;\n        fastcgi_pass unix:/var/run/hhvm/server.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Danach verlinken wir die beiden Vhosts nach <strong>/etc/nginx/sites-enabled/</strong>, um die Konfigurationen zu aktivieren</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">ln</span> -s /etc/nginx/sites-available/wordpress.fpm /etc/nginx/sites-enabled/\n<span class=\"token function\">ln</span> -s /etc/nginx/sites-available/wordpress.hhvm /etc/nginx/sites-enabled/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<h3>Ordner und User</h3>\n<p>Als erstes legen wir die notwendigen Ordner an</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p /var/www/wordpress/logs/ /var/www/wordpress/hhvm/ /var/www/wordpress/htdocs/ /var/www/wordpress/sessions/ /var/www/wordpress/tmp/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Der dazugehörige User wird beim Anlegen gleich in die <strong>www-data</strong> Gruppe einsortiert und eine invalide Shell gegeben</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">useradd</span> -d /var/www/wordpress -s /bin/false -g www-data wordpress</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Das Passwort, mit dem wir die Dateien mittels SFTP übertragen werden wird folgendermaßen gesetzt</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">passwd</span> wordpress</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Im Anschluss korrigieren wir die Dateirechte. Dabei ist es wichtig, dass der Ordner <strong>chown -R wordpress:www-data /var/www/wordpress/*</strong> weiterhin dem Root Account gehört.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">chown</span> -R wordpress:www-data /var/www/wordpress/*</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Dateiübertragungen werden mittels SFTP, getätigt. Damit entfällt die Notwendigkeit, einen FTP Server zu installieren. Jedoch muss der SSH Deamon in der <strong>/etc/ssh/sshd_config</strong> konfiguriert werden, damit der User in seinem Verzeichnis eingesperrt ist. Dort tragen wir ganz am Ende ein</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">Subsystem sftp internal-sftp\nMatch User wordpress\n    ChrootDirectory /var/www/wordpress\n    ForceCommand internal-sftp\n    AllowTCPForwarding no\n    X11Forwarding no</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p><em>Es ist wichtig, das nach dem Match User Block keine weitere Einstellungen mehr kommen!</em></p>\n<p>Damit die Änderungen ziehen, starten wir den SSH2 Server neu</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">service</span> <span class=\"token function\">ssh</span> restart</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Falls beim Neustart der Fehler <code class=\"language-text\">/etc/ssh/sshd_config line 89: Subsystem 'sftp' already defined.</code>  auftritt, muss noch folgender Eintrag auskommentiert werden</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">#Subsystem sftp /usr/lib/openssh/sftp-server</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nun sollte es möglich sein, sich mittels Filezilla, oder WinSCP zu verbinden. Filezilla wäre so ähnlich zu konfigurieren<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 305px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/df555602daec70549176fe8b9b008f9d/a3e09/filezilla_sftp_wordpress.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACRklEQVQ4y42TCVOjQBCF5///nt0tQ4iS9UisLTfqqhzhSGBCwn3mWCJ5Wz0aN2V5NfXB0DDNG/oNGw4vcXd3D38e4Pz8ElKnC0mSMbr5g37/J2S5h273GL3eCb5/+4FOR0JHkvHraoSuJIt7WT7G0VEHrsfBlvUSq9UaTbNFGMXwfR+macG2HZimCV3XoekGTOspN5lMYVk2Zr4PzmdwnImA8osgBBuPTSwWAQ4jyzJwj2M6dREGgZhYVtXL8+VqA8+b4XWkWQ4WxwmSOEG9XInk4+MjXNeFbozhup5QSYodx4Ft2yJvP6ulXBCEAs45wjACI/maqiEMY1GwbVtcj65xdnaOq6vfUBQFp6dnGAwu0O/30esdYzgYQjlRcKIo0HUD4/EYqqqKwgwfBBXfx263ExyOCVrRdrt9/lU5GN0Q9EDQtqLQnsPJH/FS8PVkKt40DdqWvtxgs9l8CRKTZhmYqmowyBamBUPXMQ8ijEY3kKQuLgZDOJOJaIxlWW9CjTIMA7e3t8ItjGSWZSmsEkaR8CTZhV54UFXRac8j+NtwLlxBXY7iBOxB1aFrGqIoeWlAnqawLAfkUfLgVyNNMzA6FXmOqqqxEwcwW0QwJxzmlMOPMpSrv8jrNfJ68w5rlKsGcfL8D4VBw+jJEgBcPoNmGII4zUVu27bYtrv32QHRU0EdtFv2/qJul1WNoqzENcsLJGn2KXlRIIpjMGrCoYFpXFUViqJASZTl5xQFlnUthDHDMMXepC00ny/+K/2iofer2hv7H/h9siUu7gQvAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"filezilla_sftp_wordpress\"\n        title=\"filezilla_sftp_wordpress\"\n        src=\"/static/df555602daec70549176fe8b9b008f9d/a3e09/filezilla_sftp_wordpress.png\"\n        srcset=\"/static/df555602daec70549176fe8b9b008f9d/772e8/filezilla_sftp_wordpress.png 200w,\n/static/df555602daec70549176fe8b9b008f9d/a3e09/filezilla_sftp_wordpress.png 305w\"\n        sizes=\"(max-width: 305px) 100vw, 305px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>PHP-FPM</h3>\n<p>Damit wir eine Referenz haben, installieren wir PHP5-FPM</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> php5-common php5-fpm php5-mysql php5-mcrypt php5-curl -y</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Danach konfigurieren wir die <strong>/etc/php5/fpm/pool.d/<a href=\"http://www.conf\" target=\"_blank\" rel=\"external noopener noreferrer\">www.conf</a></strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">user = wordpress\ngroup = www-data\nlisten = /var/run/php5-fpm.sock\nlisten.owner = wordpress\nlisten.group = www-data\nphp_admin_value[memory_limit] = 128M</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>und starten <em>PHP-FPM</em> neu</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">service</span> php5-fpm restart</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<h3>HHVM</h3>\n<p>Auf der <a href=\"https://github.com/facebook/hhvm/wiki/Prebuilt-Packages-on-Debian-7\" target=\"_blank\" rel=\"external noopener noreferrer\">Github Seite des HHVM Projekts</a> befindet sich eine Anleitung zum Installieren fertiger Debian Pakete. Die Arbeitsschritte sind</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">wget</span> -O - http://dl.hhvm.com/conf/hhvm.gpg.key <span class=\"token operator\">|</span> apt-key <span class=\"token function\">add</span> -\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"deb http://dl.hhvm.com/debian wheezy main\"</span> <span class=\"token operator\">></span> /etc/apt/sources.list.d/hhvm.list\n<span class=\"token function\">apt-get</span> update\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> hhvm</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Anders, als bei den meisten Tutorials, verbinden wir mit dem Nginx gegen einen Socket. Falls noch nicht vorhanden, legen den Ordner für den Socket an:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> -p /var/run/hhvm/</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Danach bearbeiten wir die <strong>/etc/hhvm/server.ini</strong>. Dabei tragen wir den Socket ein und kommentieren den Port aus. Ebenso verlagern wir den Pfad vom Repo:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">; php options\n \npid = /var/run/hhvm/pid\n \n; hhvm specific\n;hhvm.server.port = 9000\nhhvm.server.file_socket = /var/run/hhvm/server.sock\nhhvm.server.type = fastcgi\nhhvm.server.default_document = index.php\nhhvm.log.use_log_file = true\nhhvm.log.file = /var/www/wordpress/logs/error-hhvm.log\nhhvm.repo.central.path = /var/www/wordpress/hhvm/hhvm.hhbc</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>MySQL / MariaDB</h3>\n<p>An Stelle von MySQL setze ich auf das Drop In Replacement MariaDB. Diese ist in der Version zu 100% kompatibel mit MySQL. Das bedeutet, dass ich nur ein anderes Paket installiere, der Rest, aber wie bekannt abläuft. Eine große Distribution, <a href=\"http://www.computerbase.de/2013-12/red-hat-enterprise-linux-7-beta-tauscht-mysql-gegen-mariadb/\" target=\"_blank\" rel=\"external noopener noreferrer\">die MySQL bereits zu Gunsten von MariaDB ersetzt hat</a>, ist RedHat.</p>\n<p>Die Installation läuft wie folgt ab</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> python-software-properties\napt-key adv --recv-keys --keyserver keyserver.ubuntu.com 0xcbcb082a1bb943db\nadd-apt-repository <span class=\"token string\">'deb http://mirror.netcologne.de/mariadb/repo/5.5/debian wheezy main'</span>\n<span class=\"token function\">apt-get</span> update\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> mariadb-server</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>Weiter geht es mit <a href=\"/wordpress-unleashed-datenbank-wordpress/\" title=\"Wordpress unleashed: Datenbank + WordPress\">WordPress unleashed: Datenbank + WordPress</a></p>\n<h3>Alle Teile dieser Serie</h3>\n<ul>\n<li><a href=\"/wordpress-unleashed-konzept/\" title=\"Wordpress unleashed: Konzept\">WordPress unleashed: Konzept</a></li>\n<li><a href=\"/wordpress-unleashed-testsystem/\" title=\"Wordpress unleashed: Testsystem\">WordPress unleashed: Testsystem</a></li>\n<li><a href=\"/wordpress-unleashed-lemp-stack/\" title=\"Wordpress unleashed: LEMP Stack\">WordPress unleashed: LEMP Stack</a></li>\n<li><a href=\"/wordpress-unleashed-datenbank-wordpress/\" title=\"Wordpress unleashed: Datenbank + WordPress\">WordPress unleashed: Datenbank + WordPress</a></li>\n<li><a href=\"/wordpress-unleashed-memcached-cachify/\" title=\"Wordpress unleashed: Memcached + Cachify\">WordPress unleashed: Memcached + Cachify</a></li>\n<li><a href=\"/wordpress-unleashed-autoptimize-js-css/\" title=\"Wordpress unleashed: WordPress unleashed: Autoptimize JS + CSS\">WordPress unleashed: WordPress unleashed: Autoptimize JS + CSS</a></li>\n<li><a href=\"/wordpress-unleashed-elasticsearch/\" title=\"Wordpress unleashed: Elasticsearch\">WordPress unleashed: Elasticsearch</a></li>\n<li><a href=\"/wordpress-unleashed-wordpress-plugins/\" title=\"Wordpress unleashed: WordPress Plugins\">WordPress unleashed: WordPress Plugins</a></li>\n<li><a href=\"/wordpress-unleashed-performance-tests/\" title=\"Wordpress unleashed: Performance Tests\">WordPress unleashed: Performance Tests</a></li>\n<li><a href=\"/wordpress-unleashed-nginx-absichern/\" title=\"Wordpress unleashed: Nginx absichern\">WordPress unleashed: Nginx absichern</a></li>\n</ul>","id":"00300543-7756-594d-97a4-9d5c2aeea0df","frontmatter":{"title":"WordPress unleashed: LEMP Stack","date":"2014-09-09","tags":["wordpress","nginx","php"]},"fields":{"slug":"/wordpress-unleashed-lemp-stack/"},"timeToRead":5}},{"node":{"excerpt":"Alle bisherigen Maßnahmen hatten das Ziel PHP, Datenbank usw. schneller zu machen. Jeden Request PHP, MariaDB/MySQL und Elasticsearch gehen zu lassen ist eine Verschwendung von Ressourcen. Deswegen…","html":"<p>Alle bisherigen Maßnahmen hatten das Ziel PHP, Datenbank usw. schneller zu machen. Jeden Request PHP, MariaDB/MySQL und Elasticsearch gehen zu lassen ist eine Verschwendung von Ressourcen. Deswegen werden wir nun den Key Value Store Memcached und das Plugin Cachify installieren. Im Anschluss wird Nginx umkonfiguriert, damit er gecachte Inhalte direkt aus dem Memcached Server beziehen kann.</p>\n<h3>Memcached</h3>\n<p>Memcached wird, wie alles andere auch über APT installiert</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> memcached</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Je nach Anforderungen sollte man noch die Config <strong>/etc/memcached.conf</strong> anpassen. Mein Blog braucht keine 32MB Ram. Ein anderes Setup, könnte es jedoch brauchen. Dazu könnte die gleichzeitige Verbindungsanzahl von 1024 für manche zu gering sein</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># memory\n-m 32\n\n# Limit the number of simultaneous incoming connections. The daemon default is 1024\n-c 4096</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Nach einer Änderung nicht vergessen den Memcached Server neu zu starten.</p>\n<h3>Cachify</h3>\n<p>Das <a href=\"https://wordpress.org/plugins/cachify/\" target=\"_blank\" rel=\"external noopener noreferrer\">Plugin Cachify</a> installiert man am besten über den Plugin Manager von WordPress.</p>\n<p>Setzt man eine alte Version von Cachify ein, sollte man diese auf den aktuellsten Stand bringen. Hintergrund ist, dass der Chachify Autor <a href=\"http://wpcoder.de/\" target=\"_blank\" rel=\"external noopener noreferrer\">Sergej Müller</a> die Kompatibilität mit HHVM nach meinem Hinweis schnell hergestellt hat.<br>\nAlternativ muss man die Datei <strong>\"cachify_memcached.class.php\"</strong> von Cachify noch umschreiben, damit es unter HHVM läuft. Grund ist, dass dass die <a href=\"http://docs.hhvm.com//manual/en/memcached.setoptions.php\" target=\"_blank\" rel=\"external noopener noreferrer\">Methode setOptions nicht unterstützt wird</a>.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-php line-numbers\"><code class=\"language-php\">\t\t<span class=\"token comment\">/* Options\n\t\tself::$_memcached->setOptions(\n\t\t\tarray(\n\t\t\t\tMemcached::OPT_COMPRESSION => false,\n\t\t\t\tMemcached::OPT_BUFFER_WRITES => true,\n\t\t\t\tMemcached::OPT_BINARY_PROTOCOL => true\n\t\t\t)\n\t\t); */</span>\n\t\t<span class=\"token keyword static-context\">self</span><span class=\"token operator\">::</span><span class=\"token variable\">$_memcached</span><span class=\"token operator\">-></span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">Memcached</span><span class=\"token operator\">::</span><span class=\"token constant\">OPT_COMPRESSION</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword static-context\">self</span><span class=\"token operator\">::</span><span class=\"token variable\">$_memcached</span><span class=\"token operator\">-></span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">Memcached</span><span class=\"token operator\">::</span><span class=\"token constant\">OPT_BUFFER_WRITES</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword static-context\">self</span><span class=\"token operator\">::</span><span class=\"token variable\">$_memcached</span><span class=\"token operator\">-></span><span class=\"token function\">setOption</span><span class=\"token punctuation\">(</span><span class=\"token class-name static-context\">Memcached</span><span class=\"token operator\">::</span><span class=\"token constant\">OPT_BINARY_PROTOCOL</span><span class=\"token punctuation\">,</span> <span class=\"token constant boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Bei der anschließenden Cachify Konfiguration ist es zwingend erforderlich die <strong>Cache method</strong> auf <strong>\"Memcached\"</strong> zu stellen:<a href=\"/wp-content/uploads/2014/09/cachify.png\"><img src=\"../../uploads/2014/09/cachify.png\" alt=\"cachify\"></a></p>\n<p>Die Gültigkeit stellen wir möglichst hoch ein, da ein Flush des Caches eigentlich kaum benötigt werden wird. Des Weiteren lassen wir den Cache bei neuen Kommentaren löschen.</p>\n<p>In meinem System können sich nur Autoren und Administratoren einloggen. Deswegen werden wir diese von dem Cache ausnehmen. Wer eine größere Benutzerbasis hat, sollte diesen Haken lieber nicht setzen.</p>\n<p>Um die Auslieferung von HTML zu beschleunigen aktivieren wir zu guter Letzt den HTML Minimierer. Javascript und CSS werden wir zu einem späteren Zeitpunkt mittels eines anderen Plugins komprimieren und zusammenfassen.</p>\n<h3>Nginx</h3>\n<p>Der Nginx Vhost muss nun wie folgt angepasst werden</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n    listen 192.168.178.48:80;\n\n    root /var/www/wordpress/htdocs;\n    index index.php index.html index.htm;\n\n    access_log /var/www/wordpress/logs/access.log;\n    error_log  /var/www/wordpress/logs/error.log;\n\n    server_name \"\";\n\n    location / {\n\n        error_page 404 405 502 503 504 = @nocache;\n\n        if ( $query_string ) {\n                return 405;\n        }\n\n        if ( $request_method = POST ) {\n                return 405;\n        }\n\n        if ( $request_uri ~ \"/wp-\" ) {\n                return 405;\n        }\n\n        if ( $http_cookie ~ (wp-postpass|wordpress_logged_in|comment_author)_ ) {\n                return 405;\n        }\n\n        default_type text/html;\n\n        set $memcached_key $host$uri;\n        memcached_pass 127.0.0.1:11211;\n\n    }\n\n    location @nocache {\n        try_files $uri $uri/ /index.php?$args;\n    }\n\n    location ~* \\.(jpe?g|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|exe|pdf|ppt|txt|tar|mid|midi|wav|bmp|rtf|js|swf|avi|mp3|mov|docx|pptx|xlsx|cfg)$ {\n        expires max;\n        access_log off;\n        log_not_found off;\n    }\n\n\tlocation ~ \\.(hh|php)$ {\n        fastcgi_keep_conn on;\n        fastcgi_pass   unix:/var/run/hhvm/server.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<p>Weiter geht es mit <a href=\"/wordpress-unleashed-autoptimize-js-css/\" title=\"Wordpress unleashed: WordPress unleashed: Autoptimize JS + CSS\">WordPress unleashed: WordPress unleashed: Autoptimize JS + CSS</a></p>\n<h3>Alle Teile dieser Serie</h3>\n<ul>\n<li><a href=\"/wordpress-unleashed-konzept/\" title=\"Wordpress unleashed: Konzept\">WordPress unleashed: Konzept</a></li>\n<li><a href=\"/wordpress-unleashed-testsystem/\" title=\"Wordpress unleashed: Testsystem\">WordPress unleashed: Testsystem</a></li>\n<li><a href=\"/wordpress-unleashed-lemp-stack/\" title=\"Wordpress unleashed: LEMP Stack\">WordPress unleashed: LEMP Stack</a></li>\n<li><a href=\"/wordpress-unleashed-datenbank-wordpress/\" title=\"Wordpress unleashed: Datenbank + WordPress\">WordPress unleashed: Datenbank + WordPress</a></li>\n<li><a href=\"/wordpress-unleashed-memcached-cachify/\" title=\"Wordpress unleashed: Memcached + Cachify\">WordPress unleashed: Memcached + Cachify</a></li>\n<li><a href=\"/wordpress-unleashed-autoptimize-js-css/\" title=\"Wordpress unleashed: WordPress unleashed: Autoptimize JS + CSS\">WordPress unleashed: WordPress unleashed: Autoptimize JS + CSS</a></li>\n<li><a href=\"/wordpress-unleashed-elasticsearch/\" title=\"Wordpress unleashed: Elasticsearch\">WordPress unleashed: Elasticsearch</a></li>\n<li><a href=\"/wordpress-unleashed-wordpress-plugins/\" title=\"Wordpress unleashed: WordPress Plugins\">WordPress unleashed: WordPress Plugins</a></li>\n<li><a href=\"/wordpress-unleashed-performance-tests/\" title=\"Wordpress unleashed: Performance Tests\">WordPress unleashed: Performance Tests</a></li>\n<li><a href=\"/wordpress-unleashed-nginx-absichern/\" title=\"Wordpress unleashed: Nginx absichern\">WordPress unleashed: Nginx absichern</a></li>\n</ul>","id":"077f3953-fbea-5277-838f-0441ad4e91f5","frontmatter":{"title":"WordPress unleashed: Memcached + Cachify","date":"2014-09-09","tags":["wordpress","nginx"]},"fields":{"slug":"/wordpress-unleashed-memcached-cachify/"},"timeToRead":3}},{"node":{"excerpt":"Im letzten Schritt sichern wir über den Nginx die Installation weiter ab. Header Sicherheit Mit zusätzlichen Headern, die vom Nginx gesendet werden, kann man manche Angriffsvektoren schließen…","html":"<p>Im letzten Schritt sichern wir über den Nginx die Installation weiter ab.</p>\n<h3>Header Sicherheit</h3>\n<p>Mit zusätzlichen Headern, die vom Nginx gesendet werden, kann man manche Angriffsvektoren schließen</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># Falls SSL verwendet wird, sollte man diesen Header setzen, damit der Browser beim erneuten Eintippen automatisch auf die geischerte Variante springt.\n#add_header Strict-Transport-Security \"max-age=31536000;\";\n\n# https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options\n# Verhindert Click Jacking Angriffe\nadd_header X-Frame-Options SAMEORIGIN;\n\n# Verbietet Content Sniffing\nadd_header X-Content-Type-Options nosniff;\n\n# Falls ein User aus Versehen, den Schutz bei sich deaktiviert hat, kann man ihn hiermit wieder erzwingen\nadd_header X-XSS-Protection \"1; mode=block\";</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Unstimmige Requests blocken</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\"># Andere Request Methods machen bei WordPress keinen Sinn\nif ( $request_method !~ ^(GET|HEAD|POST)$ ) {\n    return 404;\n}\n\n# Zugriff auf bestimmte Dateien sperren\nlocation ~ /(\\.|wp-config.php|liesmich.html|readme.html) {\n    return 404;\n}\n\n# Was nicht PHP ist, verwerfen\nif ($request_filename ~* \\.(aspx|jsp|cgi)$) {\n    return 404;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h3>Limit Request</h3>\n<p>Um einen Denial of Service (DOS) zu verhindern, führen wir ein Rate Limiting ein, wie in dem Beitrag <a href=\"/nginx-denial-service-abwehr/\" title=\"Nginx: Denial Of Service Abwehr\">Nginx: Denial Of Service Abwehr</a> beschrieben.</p>\n<h3>WAF NAXSI</h3>\n<p>Als erstes aktivieren wir den auskommentierten Naxsi Beitrag in der <strong>/etc/nginx/nginx.conf</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">include /etc/nginx/naxsi_core.rules;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Dann wird die PHP Loaction des Vhosts um folgende Include für die Datei <strong>naxsi-wp.rules</strong> erweitert, in welche nachher die Ausnahmen kommen.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">include /etc/nginx/naxsi.rules;\ninclude /etc/nginx/naxsi-wp.rules;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Angelegt wird die Datei mit</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">touch</span> /etc/nginx/naxsi-wp.rules</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Am Anfang sollte man die Naxsi nur im Learning Mode laufen lassen und so ziemlich alle Funktionen von WordPress einmal durchklicken. Nach einiger Zeit des Benutzens dürften ausreichend Informationen im Error Log gelandet sein. Damit wird es Zeit Nx_util zu installieren. Wir brauchen zuerst Python. Dann laden wir das aktuelle Repository auf den Server und installieren das Tool.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> python\n<span class=\"token builtin class-name\">cd</span> /root\n<span class=\"token function\">wget</span> <span class=\"token function\">wget</span> https://naxsi.googlecode.com/files/nx_util-1.1.tgz\n<span class=\"token function\">tar</span> xfvz nx_util-1.1.tgz\n<span class=\"token builtin class-name\">cd</span> nx_util-1.1/nx_util/\n<span class=\"token function\">chmod</span> +x setup.py\n./setup.py build\n./setup.py <span class=\"token function\">install</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Danach bestimmen wir unsere IP und machen einen Extrakt von <strong>/var/www/wordpress/logs/error.log</strong>, den wir im Folgenden untersuchen</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">grep</span> <span class=\"token string\">'1.1.1.1'</span> /var/www/wordpress/logs/error.log <span class=\"token operator\">></span> /root/error.log\nnx_util.py -d wordpress -l /root/error.log\nnx_util.py -d wordpress -o <span class=\"token operator\">></span> /etc/nginx/naxsi-wp.rules</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h3>Kompletter Vhost</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n\n    listen 192.168.178.48:80;\n\n    root /var/www/wordpress/htdocs;\n    index index.php index.html index.htm;\n\n    access_log /var/www/wordpress/logs/access.log;\n    error_log  /var/www/wordpress/logs/error.log;\n\n    server_name \"\";\n\n    # Falls SSL verwendet wird, sollte man diesen Header setzen, damit der Browser beim erneuten Eintippen automatisch auf die geischerte Variante springt.\n    #add_header Strict-Transport-Security \"max-age=31536000;\";\n\n    # https://developer.mozilla.org/en-US/docs/HTTP/X-Frame-Options\n    # Verhindert Click Jacking Angriffe\n    add_header X-Frame-Options SAMEORIGIN;\n\n    # Verbietet Content Sniffing\n    add_header X-Content-Type-Options nosniff;\n\n    # Falls ein User aus Versehen, den Schutz bei sich deaktiviert hat, kann man ihn hiermit wieder erzwingen\n    add_header X-XSS-Protection \"1; mode=block\";\n\n    # Andere Header machen bei WordPress keinen Sinn\n    if ( $request_method !~ ^(GET|HEAD|POST)$ ) {\n        return 404;\n    }\n\n    # Zugriff auf bestimmte Dateien sperren\n    location ~ /(\\.|wp-config.php|liesmich.html|readme.html) {\n        return 404;\n    }\n\n    # Was nicht PHP ist, verwerfen\n    if ($request_filename ~* \\.(aspx|jsp|cgi)$) {\n        return 404;\n    }\n\n    location / {\n\n        error_page 404 405 502 503 504 = @nocache;\n\n        if ( $query_string ) {\n        return 405;\n        }\n\n        if ( $request_method = POST ) {\n        return 405;\n        }\n\n        if ( $request_uri ~ \"/wp-\" ) {\n        return 405;\n        }\n\n        if ( $http_cookie ~ (wp-postpass|wordpress_logged_in|comment_author)_ ) {\n        return 405;\n        }\n\n        default_type text/html;\n\n        set $memcached_key $host$uri;\n        memcached_pass 127.0.0.1:11211;\n\n    }\n\n    location @nocache {\n        try_files $uri $uri/ /index.php?$args;\n    }\n\n    location /RequestDenied {\n        return 404;\n    }\n\n    location ~* \\.(jpe?g|gif|png|ico|css|zip|tgz|gz|rar|bz2|doc|xls|pdf|ppt|txt|tar|bmp|rtf|js|docx|pptx|xlsx|cfg)$ {\n        expires max;\n        access_log off;\n        log_not_found off;\n    }\n\n    location ~ \\.(hh|php)$ {\n\n        include /etc/nginx/naxsi.rules;\n        include /etc/nginx/naxsi-wp.rules;\n\n        limit_req zone=dynamic burst=20 nodelay;\n\n        fastcgi_keep_conn on;\n        fastcgi_pass unix:/var/run/hhvm/server.sock;\n        fastcgi_index  index.php;\n        fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        include        fastcgi_params;\n    }\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<hr>\n<h3>Alle Teile dieser Serie</h3>\n<ul>\n<li><a href=\"/wordpress-unleashed-konzept/\" title=\"Wordpress unleashed: Konzept\">WordPress unleashed: Konzept</a></li>\n<li><a href=\"/wordpress-unleashed-testsystem/\" title=\"Wordpress unleashed: Testsystem\">WordPress unleashed: Testsystem</a></li>\n<li><a href=\"/wordpress-unleashed-lemp-stack/\" title=\"Wordpress unleashed: LEMP Stack\">WordPress unleashed: LEMP Stack</a></li>\n<li><a href=\"/wordpress-unleashed-datenbank-wordpress/\" title=\"Wordpress unleashed: Datenbank + WordPress\">WordPress unleashed: Datenbank + WordPress</a></li>\n<li><a href=\"/wordpress-unleashed-memcached-cachify/\" title=\"Wordpress unleashed: Memcached + Cachify\">WordPress unleashed: Memcached + Cachify</a></li>\n<li><a href=\"/wordpress-unleashed-autoptimize-js-css/\" title=\"Wordpress unleashed: WordPress unleashed: Autoptimize JS + CSS\">WordPress unleashed: WordPress unleashed: Autoptimize JS + CSS</a></li>\n<li><a href=\"/wordpress-unleashed-elasticsearch/\" title=\"Wordpress unleashed: Elasticsearch\">WordPress unleashed: Elasticsearch</a></li>\n<li><a href=\"/wordpress-unleashed-wordpress-plugins/\" title=\"Wordpress unleashed: WordPress Plugins\">WordPress unleashed: WordPress Plugins</a></li>\n<li><a href=\"/wordpress-unleashed-performance-tests/\" title=\"Wordpress unleashed: Performance Tests\">WordPress unleashed: Performance Tests</a></li>\n<li><a href=\"/wordpress-unleashed-nginx-absichern/\" title=\"Wordpress unleashed: Nginx absichern\">WordPress unleashed: Nginx absichern</a></li>\n</ul>","id":"9099e3b5-3eaf-5d0b-9282-e0f1f92e0d5c","frontmatter":{"title":"WordPress unleashed: Nginx absichern","date":"2014-09-09","tags":["wordpress","nginx"]},"fields":{"slug":"/wordpress-unleashed-nginx-absichern/"},"timeToRead":4}},{"node":{"excerpt":"Vor ein paar Tagen gab es ein Problem durch einen Denial Of Service (DOS). Einer der unzähligen SEO Agenturen crawlte die betroffene Seite mehr aggressiv. Die robots.txt wurde dabei natürlich…","html":"<p>Vor ein paar Tagen gab es ein Problem durch einen Denial Of Service (DOS). Einer der unzähligen SEO Agenturen crawlte die betroffene Seite mehr aggressiv. Die robots.txt wurde dabei natürlich ignoriert.</p>\n<p>Der Unterschied eines DOS zu einem DDOS liegt darin, dass hier die CPU, Ram bzw. Festplatte überlastet werden, während man bei einem DDOS die Bandbreite der Server überlastet. So kann bei einem DOS schon eine kleine 1000er DSL Leitung reichen, wenn man eine Unterseite auf dem Server identifizieren kann, die die Hardware des Servers an seine Grenzen bringt.</p>\n<p>Im konkreten Fall war ein etwas größeres Setup betroffen, das mit Hardware Load Balancer, mehreren App Servern, die auf ein DB Cluster und spezielle Suchserver zugreifen, arbeitet. Auf den App Servern läuft dabei der Nginx als Webserver. Im Grunde also ein recht Leistungsstarkes System.</p>\n<p>Damit der Traffik gar nicht erst bei den App Servern ankommt, wäre hier die beste Lösung die aggressive IP direkt am Load Balancer zu sperren. Im konkreten Fall war das aber auf Grund zwingender Prozesse, Zuständigkeiten und der Urlaubszeit leider nicht auf die Schnelle möglich.</p>\n<p>Ein schneller Workaround musste also her. Da zu dem Zeitpunkt noch nicht ganz klar war, wie viele IPs beteiligt sind bzw. sein werden und die SEO Agentur ihren Bot klar über den User Agent erkennbar machte, wurde eine Sperre über den User Agent implementiert. Recht weit oben im Server Block wurde folgendes eingetragen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">if ($http_user_agent ~* (BadBot) ) { return 403;}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Nach dem Eintragen, wurde die Config getestet und, da der Syntax akzeptiert wurde, der Server neu geladen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">/etc/init.d/nginx configtest\n/etc/init.d/nginx reload</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>Nachdem die Änderung ging der Load sofort zurück. Da man die Logs nicht mit hundert tausenden Logeinträgen des Bots voll haben wollte, noch das Logging deaktivieren:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">if ($http_user_agent ~* (BadBot) ) {\n access_log /dev/null;\n error_log /dev/null crit;\n return 403;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Eine Lösung über die IP empfiehlt es sich eine extra Datei mit der Liste an bösen IPs anzulegen und diese dann zu includen. In der Liste sehen Einträge dann so aus:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">\n# Blocke einzelne IP\ndeny 1.2.3.4;\n\n# Blocke ein ganzes Subnetz\ndeny 1.2.3.0/24;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Der Include im server Block:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">include /etc/nginx/bad_ips.conf;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Wenn Nginx hinter einem Load Balancer ist, muss man noch auf den X-Forwarded-For Header zugreifen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">// Hier die Load Balancer IP angeben\nset_real_ip_from 1.1.1.1;\nreal_ip_header X-Forwarded-For;\n// Die Liste includen\ninclude /etc/nginx/bad_ips.conf;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Mit dieser Lösung kann man aber immer nur reagieren, wenn es bereits zu spät, und der Service beeinträchtigt ist. Um einen Denial Of Service von vornherein zu erschweren, kann man bei Nginx mit Rate Limiting arbeiten. Dabei sollte man zwischen Location für statische und dynamisch Inhalte unterscheiden. Ein zu strenges Limit auf JS, Bilder etc. kann den Seitenaufbau verzögern, oder sogar verhindern.</p>\n<p>Zuerst erstellen wir im http block in der <em>/etc/nginx/nginx.conf</em> die Limit Zonen <em>static</em> und <em>dynamic</em></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">limit_req_zone $binary_remote_addr zone=static:20m rate=20r/s;\nlimit_req_zone $binary_remote_addr zone=dynamic:20m rate=10r/s;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<p>In der Location für die Zugriffe, auf Rails, PHP, NodeJS, oder wie man dynamische Inhalte auch immer ansprechen möchte, aktiviert man dann die vorher definierte Zone. Dabei habe ich hier einen Burst von 20 Zugriffen erlaubt. Der Zusatz <em>nodelay</em> hat zur Folge, dass bei Erreichen des Limits mit 403 geantwortet wird, wenn das Limit erreicht wurde. Ohne den Zusatz wird mit der Antwort geantwortet, bis eine Antwort wieder erlaubt wäre. Wenn man mit Anfragen bombadiert wird, kann es zu hunderten, wenn nicht gar tausenden offenen Verbindungen kommen, wenn man <em>nodelay</em> weg lässt. Das folgende Beispiel wäre für PHP:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">\nlocation ~ \\.php$ {\n   limit_req zone=dynamic burst=20 nodelay;\n   include /etc/nginx/fastcgi_params;\n   fastcgi_pass unix:/tmp/php5-fpm.sock;\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Wenn Nginx hinter einem Load Balancer steht, muss man auch hier mit <em>real_ip_header</em> arbeiten. Ansonsten werden sehr schnell, sämtliche Anfragen blockiert.</p>","id":"48e6bc8f-06e1-5ef9-8ab1-37060af8ba6a","frontmatter":{"title":"Nginx: Denial Of Service Abwehr","date":"2014-06-14","tags":["security","nginx"]},"fields":{"slug":"/nginx-denial-service-abwehr/"},"timeToRead":3}},{"node":{"excerpt":"Diese Woche war auf so ziemlich jedem Newsportal, wie z.B. heise.de zu lesen, dass der Nginx Webserver eine Sicherheitslücke hat, durch die man Code einschleusen kann. Zu dem Fix wurde gleichzeitig…","html":"<p>Diese Woche war auf so ziemlich jedem Newsportal, wie z.B. <a href=\"http://www.heise.de/security/meldung/Leerzeichen-tricksen-Nginx-aus-2050731.html\" target=\"_blank\" rel=\"external noopener noreferrer\">heise.de</a> zu lesen, dass der Nginx Webserver eine Sicherheitslücke hat, durch die man Code einschleusen kann.</p>\n<p>Zu dem Fix wurde gleichzeitig ein Workaround veröffentlicht, damit die Webserver geschützt sind, bis die Distributions Maintainer wie Debian, CentOS, usw. den Fix an ihre User weiterreichen.</p>\n<p>Als Workaround wurde empfohlen folgenden Eintrag in den server Blöcken einzutragen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">if ($request_uri ~ \" \") {\n   return 444;\n} </code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Der Fix ist nun zumindest bei Debian und beim inoffiziell Dotdeb Repository angekommen. Es heißt also folgendes auszuführen:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">apt-get</span> update <span class=\"token operator\">&amp;&amp;</span> <span class=\"token function\">apt-get</span> upgrade</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Es ist leider zu befürchten, dass in nächster Zeit die Anzahl der erfolgreichen Hacks ansteigen wird, zumal viele Serverbesitzer oft nicht zeitnah reagieren und Nginx mittlerweile auch bei Plesk dabei ist.</p>","id":"5ed1b1eb-5185-5eef-9557-db641ed785ce","frontmatter":{"title":"Sicherheitslücke im Nginx: so schnell wie möglich updaten","date":"2013-11-23","tags":["security","nginx"]},"fields":{"slug":"/sicherheitsluecke-im-nginx-schnell-wie-moeglich-updaten/"},"timeToRead":1}},{"node":{"excerpt":"Warum es aus SEO und Marketinggründen so wichtig ist, eine schnelle Webseite zu haben kann man bei folgenden Links nachlesen: Using site speed in web search ranking Interview mit Matt Cutts Speed…","html":"<p>Warum es aus SEO und Marketinggründen so wichtig ist, eine schnelle Webseite zu haben kann man bei folgenden Links nachlesen:</p>\n<ul>\n<li><a href=\"http://googlewebmastercentral.blogspot.de/2010/04/using-site-speed-in-web-search-ranking.html\" title=\"Using site speed in web search ranking\" target=\"_blank\" rel=\"external noopener noreferrer\">Using site speed in web search ranking</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=dQkPhw5n4ZE\" title=\"Interview mit Matt Cutts\" target=\"_blank\" rel=\"external noopener noreferrer\">Interview mit Matt Cutts</a></li>\n<li><a href=\"http://www.getelastic.com/site-speed-infographic/\" target=\"_blank\" rel=\"external noopener noreferrer\">Speed Kills Conversion Rates</a></li>\n</ul>\n<p>Wie Goolge deinen Pagespeed bewertet kann man unter <a href=\"http://developers.google.com/speed/pagespeed/insights/\" target=\"_blank\" rel=\"external noopener noreferrer\">developers.google.com</a> überprüfen.</p>\n<p>In dem früheren Beitrag <a href=\"/wordpress-beschleunigen-mit-wp-redis-cache/\">WordPress beschleunigen mit Wp Redis Cache</a> habe ich beschrieben, wie man Fullpage Caching des WordPress Blogs mit der In-Memory Datenbank bzw. Key Value Store <strong>Redis</strong> betreiben kann. Alternativ zu <strong>Redis</strong> wird oft auch <strong>Memcached</strong>, oder die Festplatte genutzt. Das Ziel ist immer das gleiche. Der ansonsten nicht sehr schnelle Aufruf einer WordPress Seite soll beschleunigt werden. Erreicht wird das Ziel dadurch, dass beim Ausliefern der gecachten Inhalte der WordPress Core und damit auch MYSQL nicht mehr angefragt werden.</p>\n<p>Je nach Server und Belastung ist dabei die Festplatten oder die In-Memory Lösung besser geeignet. Letztere ist leider nur möglich, wenn man selber Herr über den Server ist. Insbesondere bei fertigem Webspace kommt nur HDD Caching in Frage.<br>\nWird eine In-Memory Datenbank genutzt, schaltet man den Flaschenhals Festplatte ab. Vorausgesetzt wird natürlich ein ausreichend großer Ram.</p>\n<p>Bei diesem Cache Konzept werden nach wie vor zahlreiche Verbindungen, File Handler und Sockets geöffnet. Im Schaubild nicht inbegriffen sind Ausführungen über Nameserver und TCP Connections:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 488px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fb5a7bd10ac41287865d113fe819d494/bd48c/cache1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 142.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAYAAACqhkzFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD40lEQVRIx41ViXLaShD0/39DPuClKq6KU4md8BLHiY2NwY6NwUJcQidIoGN1rW76lRZDxOGXTNXWwiL19MxON0fYieVyyVYZXpRC9yIkWb757U9xdAiwDCeIcDOe42ps4kl1kOfFX4G+CijOCU4azzhr8fjWEUGTbOv313BfBYzSDJwRoqW4UEjMzoqiqAAu/w4Q+N3DOI4xmojwXAJCyF7Sg4C7WdnnysXkWQZRFHDbaEAYC6DRNttdxkf/lzVJUsZwPjdg6AaiKNpczqE2MUBZlmBZzopNniPLMhR5jjCK0dYI6hMLo0XAztaMXNeFaS6gaSpCGm0zvLm6RPupw3rk+z7CMEREQ/QnCmotHqcX97gezKCoKmNIKWXlPz48wrYtRHGyDfjz4jsefj1gYVqM4TriNENXI7iTHIwXPpbLYlNFj+thNBxClmTQXYa2ZcKxbUwEAa5LUB2yLM9Bk3QFth542wZx7J2ZrPSwlNbAjMDpPp6nLvh5AI8mO4O0ijQvwM8IejOyJ8cNw54R4N+OhHcX9zht8biRXMxcujVG64clO8SX9gSf2xOIVvgKoO7i830fb96d4Z9aHeecwgzhEOCMUNQFk60poXtmwgAf5QVqXQXnnIqvXYllrz68Ee3LPtYMCJqxOdtjaAUxJCeCQiKm2XJfG8E6Sl2XHTMdAklWkKQZkrxAsQNW7iulsFt8Wdi2KctxULvr4bTJ4aTexoebLs5uO/jU4iEb1ss7FYarHqwqWqK6L6GpCiRFxfVIxyWv4aR2jeOzS5x3JFyLNvqiiqmqMHVtGFYbX22w7vhocCKSfAk/TkFoApv4ID5l5muXu+fjlhMgz52dkg8IfaQY+Pjj12Ymsyxl0rQsE4HvI08TDMcCPny7RWeo/BmwVImoqL+lGMegNATP8xj0ecRJys6VqY44SfYBWbmVUShXyWSdIEkS9r3f74PrPOGp20WWFwh9F/3BAK7nH3Ls7SH1PLfijQnCMECn08Fds4n2Y5s5Uxh4EIQxZjN932A35WY53IBiIIjMF8vzsuTSvnRdh2HoUFUVxAswkTUQP9xMxp5jp2mGkeFiOA8gmBTDRYgZCZFnKQNdx9yLwBs+xosAA8NHf+awgT/av4wCN8Mpjq8emMbfNzj2cOB7DPBFExBNHw3Rwe3ERFMmeNQ8REl6ALBY4rI9wNuTr3j7vobjL3Xc9SbMB1d/TCtAxaH43lPxsdFFrS3gSQ8OA5a0n/UAP3kNnxoc6qMFZCfa67NkBWiqAe6nIZqqjwfNZS6/cymr7C6NMfNi6EEKw4tYZuwoqXxZdyk0J2TuRMLV5f0HhQ6zZ7zXcMgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cache1\"\n        title=\"cache1\"\n        src=\"/static/fb5a7bd10ac41287865d113fe819d494/bd48c/cache1.png\"\n        srcset=\"/static/fb5a7bd10ac41287865d113fe819d494/772e8/cache1.png 200w,\n/static/fb5a7bd10ac41287865d113fe819d494/e17e5/cache1.png 400w,\n/static/fb5a7bd10ac41287865d113fe819d494/bd48c/cache1.png 488w\"\n        sizes=\"(max-width: 488px) 100vw, 488px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Bei diesem Konzept fragt der Webserver bei PHP an, welches dann nach gecachten Inhalten sucht bzw. diese anlegt. Dabei geht natürlich Zeit verloren, wenn der Webserver bei PHP und PHP dann bei dem Cache anfragt.</p>\n<p>Ziel sollte es deswegen sein, den Zwischenschritt PHP auszulassen, wenn es bereits gecachte Inhalte gibt. Bei Nginx ist das Memcached Modul im Standard dabei, eine Redis Connector müsste erst als Third Party Modul in den Nginx kompiliert werden. Die Stabilität im Live Betrieb ist dabei dabei ungewiss. Aus diesem Grund sollte man lieber auf die In-Memory Datenbank Memcached setzen.</p>\n<p>Nun ist folgendes Konzept möglich:<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 494px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/925e4a313446b7d7afa2ec4514b50357/d72d4/cache2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 136%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD1ElEQVRIx52VWW/bVhCF/f//Q5/71ARom6UNartOZCeOZcukREnWZi3cRHGRxH37Cl5Zi624QDvA1SWI0eGZe+bMPeGVKMtS7FmeEyVp9eLVnMM4qV5u1zZp+xynGYrpU1fXzLyILEtptZpYlkWSJAf5B4CHIIegVUwsj7c1md8uJc6VKWEUI0v39Hp9AfpDwGPae+BVmHAz9fg2XdM1V+RZxtLz/r3k6mc0HCDLMmEYHrFd+gHNbv/Zn187oh1gU5a4urxE142jL7pBgjyYEGfFD0V5SUAA9rsd7up1hv0+aRLvlmZa/N1ROe/o3I0tPNcVYkRRRJ7nR2VXzyfViS6DGC8ukLoDppaLtfTJ0gTNsvnrtsfHLxL1oYnjOGRZThhFqKpGKU4cAb5jWBQFDXXJqTLjvK1y0Ztzq66I0w0DfRUzsEPWcU5bXXAuDfisjPl090CtPeas0UOeLii2gFXjyobPr5cSP/3ykd+/tmhoa4I42daxUdxzOb3v86k1483pd37+9ZQ3F3f8IU+4HlnkRfHEsITLB4339R5vLm55W5M4a02InhhWEcUxcRyjugETL2GgOVxLXUbzFdNViuqGz/vwwVwhaSvhCllf0zFXpFlGlIOqGwLsZWi6JvYiS8V5V0JtRHlSJy82pRUHtvtw1eS2O94pWDzlmI7Hn9cK6tymrbQYDEfohk6lx84p3sJCublBHY9xXRfbcai3+rh+fNTAc9vj40Ud1VyIduu0u8xNc8Nwm+RYc75+ueRx9EgQBMI1r1msYqLpuniu8qIw2rlsB2gvFtw37ul0uwRPYOUW7IUb4iSlP55R/mDsPRsOjm0TBsGrtqoiSVLkmcNZR6djLAXbwzwhih/GOH7Mw6OK4awItz14EMJyYchoMqPWM3hXf6A+9cjL58dyUpYFvaptdJ/uIkIyfIbWWhScpinL5ZKFvRCAwr9libaMUOYhreEUf70Sdtx7Gbjrq7w9u+FDrcG7mkRN7rOw5mRZhmXNaTZl4ePDmUlZkKUpw0GPltLeA1Y/bdXlW8+k3jfF3tFcKuZVWHMTRVGQpQZza/GsV8V4c2wxdPfjqyyZOAH3xn5trPTUc6bJ1dUVd7e39B96O4aVGGGcMnicsI5isrzYl1yBJmkqbrdq50DZSnXDMMSybXvHTHfWKPqKgRPTMdZ0NWfvlONb5fndcnx1lkzdkNrQ5nNnxtXIFrMgz4vjW2/Xdy/ujP3afExdRpx3Nd5fK5y2pjQNX3TBCf8hDpt85vh8V30aZkRdC5A1b1Py/wWsBqoXxFirEHsdielUqfwPSBAWt/ZLlYkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"cache2\"\n        title=\"cache2\"\n        src=\"/static/925e4a313446b7d7afa2ec4514b50357/d72d4/cache2.png\"\n        srcset=\"/static/925e4a313446b7d7afa2ec4514b50357/772e8/cache2.png 200w,\n/static/925e4a313446b7d7afa2ec4514b50357/e17e5/cache2.png 400w,\n/static/925e4a313446b7d7afa2ec4514b50357/d72d4/cache2.png 494w\"\n        sizes=\"(max-width: 494px) 100vw, 494px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Der Nginx öffnet bei der Useranfrage einen Socket zum Memcached Server und liefert gecachte Inhalte direkt aus dem Ram aus. Langsamere Festplattenzugriffe sind nicht mehr nötig. Ebenso wenig ist PHP bei bereits gecachten Inhalten involviert.<br>\nFalls eine Datei nicht im Cache gefunden werden kann, wird der normale PHP + MYSQL Prozess von WordPress durchlaufen und zusätzlich zur Ausgabe an den User das Ergebnis in die Memcached Datenbank geschrieben.</p>\n<p>Bei meinem Blog konnte ich die Ladenzeiten im Vergleich zu Konzept 1 dadurch im Optimum fast halbieren. Im Mittel wurde die Ladezeit um 1/3 gesenkt.</p>","id":"7c4de8a2-40ee-5422-991d-de64e6f04a1c","frontmatter":{"title":"Mehr Speed für WordPress mittels Fullpage Caching mit Nginx und Memcached","date":"2013-09-14","tags":["wordpress","nginx"]},"fields":{"slug":"/mehr-speed-fuer-wordpress-mittels-fullpage-caching-mit-nginx-und-memcached/"},"timeToRead":2}},{"node":{"excerpt":"Ob IP Adressen personenbezogene Daten sind, wurde in Deutschland bisher noch nicht in höchster Instanz entschieden. Bei IP4 Adressen bleibt es noch strittig, insbesondere, weil sie sich bei vielen…","html":"<p>Ob IP Adressen personenbezogene Daten sind, wurde in Deutschland bisher noch nicht in höchster Instanz entschieden. Bei IP4 Adressen bleibt es noch strittig, insbesondere, weil sie sich bei vielen ISPs nach jedem Login ändern.</p>\n<p>Das OLG Hamburg sieht sie im Beschluss Beschluss vom 03.11.2010, 5 W 126/10 nicht als solche an, der EuGH hat im Urteil Urt. v. 24.11.2011, Az. C-70/10 sie als personenbezogene Daten angesehen. Datenschützer vertreten schon lange die Ansicht vom EuGH. Ein Wechsel zum Hashen der IPs reicht nach einer Ansicht nicht.</p>\n<p>Wer hinter diesem Hintergrund, das Speichern von IPs deaktivieren möchte, muss dies zum Einen beim Webserver, zum Anderen bei den eingesetzten Scripten tun.</p>\n<p>Bei Nginx legt man ein neues Logformat (/etc/nginx/conf.d/logging.conf) an:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">log_format noip\t'[$time_local] '\n\t'\"$request\" $status $body_bytes_sent '\n\t'\"$http_referer\" \"$http_user_agent\"';</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>und wendet es in den einzelnen Vhosts an:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">access_log /var/log/nginx/access.log noip;</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Beim Apache ist das Logformat im Regelfall in der /etc/apache2/apache2.conf definiert und kann so angepasst werden:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">LogFormat \"%v:%p %t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" vhost_combined\nLogFormat \"%t \\\"%r\\\" %>s %b \\\"%{Referer}i\\\" \\\"%{User-Agent}i\\\"\" combined\nLogFormat \"%t \\\"%r\\\" %>s %b\" common</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>Nach den Webservern sind die Scripte dran. Das Einfachste ist es, die Column der Datenbank zu bearbeiten, in der die IPs gespeichert werden. In der Regel ist diese mit VARCHAR(15) definiert, weil eine IP4 Adresse maximal 15 Stellen haben kann. Minimal sind es 7 Stellen. Reduziert man die Column auf 6 oder weniger Stellen, ist es nicht mehr möglich, IPs in sinnvoller Weise zu speichern:</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-sql line-numbers\"><code class=\"language-sql\"><span class=\"token keyword\">ALTER</span> <span class=\"token keyword\">TABLE</span> <span class=\"token punctuation\">`</span>wp_comments<span class=\"token punctuation\">`</span> CHANGE <span class=\"token punctuation\">`</span>comment_author_IP<span class=\"token punctuation\">`</span> <span class=\"token punctuation\">`</span>comment_author_IP<span class=\"token punctuation\">`</span> <span class=\"token keyword\">VARCHAR</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span> <span class=\"token keyword\">DEFAULT</span> <span class=\"token string\">''</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>Das Beispiel ist für die Kommentarfunktion von WordPress gedacht, lässt sich aber auf beliebige andere CMS anwenden.</p>","id":"2a5dae40-f998-5db4-978e-5d6ae5a5eda7","frontmatter":{"title":"IP Adressen, Datenschutz, Nginx, Apache und CMS","date":"2013-01-31","tags":["nginx"]},"fields":{"slug":"/ip-adressen-datenschutz-nginx-apache-und-cms/"},"timeToRead":1}},{"node":{"excerpt":"In einem früheren Artikel hatte ich beschrieben, dass ich einen Nginx Server als Reverse Proxy vor meinen Apachen geschaltet habe. Bei neueren Tests mit deutlich mehr gleichzeitigen Verbindungen und…","html":"<p>In einem <a href=\"/nginx-als-reverse-proxy-mit-cache-und-apache2/\" title=\"Nginx als Reverse Proxy mit Cache und Apache2\">früheren Artikel</a> hatte ich beschrieben, dass ich einen Nginx Server als Reverse Proxy vor meinen Apachen geschaltet habe.</p>\n<p>Bei neueren Tests mit deutlich mehr gleichzeitigen Verbindungen und Wiederholungen habe ich den Webserver jedoch unbeabsichtigter Weise selber unerreichbar gemacht. Für meinen Server hatte die Benchmark eine Auswirkung, wie eine kleine DDOS/Flood Attacke.<br>\nDurch die vielen Anfragen auf die PHP Skripte und damit auch die MYSQL Datenbank dahinter, war die Hardware einfach am Limit.</p>\n<p>Da ich beim para virtualisierten Vserver keinen vollen Zugriff auf die IP Tables habe, musste eine Lösung auf Ebene der Serverdienste her.</p>\n<p>Als erstes habe ich im <strong>http</strong> Block der nginx.conf eine Limit Zone eingerichtet:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">http {\n\t(...)\n\tlimit_req_zone $binary_remote_addr zone=flood:10m rate=10r/s;\n\t(...)\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Die Zone trägt den Namen <strong>flood</strong>, lässt pro IP 10 gleichzeitige Verbidungen zu und kann 10MB Informationen speichern.</p>\n<p>Im zweiten Schritt habe ich die Zone im <strong>server</strong> Block des Vhosts für die <strong>location</strong> der PHP Dateien eingetragen:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-text line-numbers\"><code class=\"language-text\">server {\n\t(...)\n\tlocation ~ \\.php {\n\t\tlimit_req zone=flood burst=20;\n\t\t(...)\n\t}\n\t(...)\n}</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<p>Dabei wird ein Burst von 20 Requests in der Sekunde zugelassen, damit bei einem Aufruf einer Seite mit vielen AJAX Elementen keine Probleme entstehen.</p>\n<p>In die <strong>location</strong> für statische Dateien wird die Zone <strong>nicht</strong> eingetragen. Hat man viele statische Dateien, könnte sich der Seitenaufbau spürbar verlangsamen bzw. alle Dateien erst nach mehrmaligen Aufruf der Seite beim Benutzer vorhanden sein.</p>\n<p>Wenn man Zugriff auf die IP Tables hat, sollte man besser hier ansetzen, als beim Webserver. Des Weiteren ist noch zu sagen, dass sowohl die vorgeschlagene Konfiguration, als auch die IP Tables nur kleinere Attacken aufhalten können, die das Ziel haben, die CPU und Ram Ressourcen des Servers anzugreifen. Wenn man mit mehr Bandbreite angegriffen wird, als man selber zur Verfügung hat, wird einem die Konfiguration nicht viel helfen und eine Hardwarefirewall muss her.</p>","id":"a83b561d-3565-55d4-9097-dabb10569630","frontmatter":{"title":"Ein klein Wenig mehr Flood und DDOS Schutz","date":"2012-11-24","tags":["nginx","Apache2"]},"fields":{"slug":"/ein-klein-wenig-mehr-flood-und-ddos-schutz/"},"timeToRead":1}},{"node":{"excerpt":"Heute war mal wieder Bastelzeit am Server. Nachdem ich Worpress auf die aktuelle Version 3.4 gebracht hatte, bin ich das Projekt Nginx vor dem Apache2 als Reverse Proxy mit Caching angegangen. Als…","html":"<p>Heute war mal wieder Bastelzeit am Server. Nachdem ich Worpress auf die aktuelle Version 3.4 gebracht hatte, bin ich das Projekt Nginx vor dem Apache2 als Reverse Proxy mit Caching angegangen.</p>\n<p>Als Anregung dafür habe ich die Blogbeiträge <a href=\"http://wp-performance.com/2010/10/nginx-reverse-proxy-cache-wordpress-apache/\" title=\"nginx reverse proxy cache wordpress apache\" target=\"_blank\" rel=\"external noopener noreferrer\">nginx reverse proxy cache wordpress apache</a> und <a href=\"http://www.debianroot.de/server/nginx-als-reverse-proxy-fuer-statische-inhalte-vor-apache-1345.html\" title=\"nginx als reverse proxy fuer statische inhalte vor apache\" target=\"_blank\" rel=\"external noopener noreferrer\">nginx als reverse proxy fuer statische inhalte vor apache</a> genommen.<br>\nEin weiteres HowTo für diese Thematik zu schreiben ist in Anbetracht der Fülle von bereits bestehenden wohl Zeitverschwendung. Deswegen beschränke ich mal auf die Darstellung des Ergebnis meiner Bastelei.</p>\n<p>Ich hatte mir von der Aktion zwar eine Entlastung versprochen, aber das Ergebnis hat mich dann doch sehr positiv überrascht.<br>\nGetestet habe ich mit der Apache Benchmark und habe jeweils 500 Request mit einer Concurrency von 50. Dabei hatte ich den Reverse Proxy am Anfang erst einmal auf dem Port 8080 laufen und habe dort die Einstellungen vorgenommen und getestet.<br>\nErst, als ich die Einstellungen zu meiner Zufriedenheit abgeschlossen hatte, wurden die Ports beim Apache und Nginx umgestellt und der Apache auf das Lauschen auf dem Localhost eingeschränkt.</p>\n<p>Die Benchmarks der unterschiedlichen Konfigurationen sprechen für sich.</p>\n<p>Ohne den vorgeschalteten Nginx schaffte der Apache2 lediglich:</p>\n<blockquote>\n<p>Requests per second: 8.08 [#/sec] (mean)</p>\n</blockquote>\n<p>Mit dem Nginx als Proxy ergaben sich dann:</p>\n<blockquote>\n<p>Requests per second: 1485.38 [#/sec] (mean)</p>\n</blockquote>\n<p>Wenn das keine Verbesserung ist, dann weiß ich auch nicht weiter.</p>\n<p>Die komplette Apache2 Messung:</p>\n<blockquote>\n<p>ab -n 500 -c 50 /</p>\n<p>Server Hostname: <a href=\"http://www.ulrich-block.de\" target=\"_blank\" rel=\"external noopener noreferrer\">www.ulrich-block.de</a><br>\nServer Port: 80</p>\n<p>Document Path: /<br>\nDocument Length: 34243 bytes</p>\n<p>Concurrency Level: 50<br>\nTime taken for tests: 61.872 seconds<br>\nComplete requests: 500<br>\nFailed requests: 350<br>\n(Connect: 0, Receive: 0, Length: 350, Exceptions: 0)<br>\nWrite errors: 0<br>\nNon-2xx responses: 24<br>\nTotal transferred: 5265078 bytes<br>\nHTML transferred: 5166433 bytes<br>\nRequests per second: 8.08 [#/sec] (mean)<br>\nTime per request: 6187.249 [ms] (mean)<br>\nTime per request: 123.745 [ms] (mean, across all concurrent requests)<br>\nTransfer rate: 83.10 [Kbytes/sec] received</p>\n<p>Connection Times (ms)<br>\nmin mean[+/-sd] median max<br>\nConnect: 4 4 0.3 4 6<br>\nProcessing: 92 5609 12592.8 561 61867<br>\nWaiting: 92 5562 12578.3 561 61840<br>\nTotal: 96 5614 12592.9 566 61872</p>\n<p>Percentage of the requests served within a certain time (ms)<br>\n50% 566<br>\n66% 3633<br>\n75% 6219<br>\n80% 6817<br>\n90% 8385<br>\n95% 39301<br>\n98% 59269<br>\n99% 60499<br>\n100% 61872 (longest request)</p>\n</blockquote>\n<p>Mit Reverse Proxy und Caching:</p>\n<blockquote>\n<p>ab -n 500 -c 50 :8080/</p>\n<p>Server Hostname: <a href=\"http://www.ulrich-block.de\" target=\"_blank\" rel=\"external noopener noreferrer\">www.ulrich-block.de</a></p>\n<p>Document Path: /<br>\nDocument Length: 7749 bytes</p>\n<p>Concurrency Level: 50<br>\nTime taken for tests: 0.337 seconds<br>\nComplete requests: 500<br>\nFailed requests: 0<br>\nWrite errors: 0<br>\nTotal transferred: 4003000 bytes<br>\nHTML transferred: 3874500 bytes<br>\nRequests per second: 1485.38 [#/sec] (mean)<br>\nTime per request: 33.661 [ms] (mean)<br>\nTime per request: 0.673 [ms] (mean, across all concurrent requests)<br>\nTransfer rate: 11613.24 [Kbytes/sec] received</p>\n<p>Connection Times (ms)<br>\nmin mean[+/-sd] median max<br>\nConnect: 4 10 3.9 10 19<br>\nProcessing: 11 22 4.4 22 35<br>\nWaiting: 4 9 2.9 10 16<br>\nTotal: 21 32 2.7 32 43</p>\n<p>Percentage of the requests served within a certain time (ms)<br>\n50% 32<br>\n66% 33<br>\n75% 34<br>\n80% 34<br>\n90% 35<br>\n95% 37<br>\n98% 39<br>\n99% 40<br>\n100% 43 (longest request)</p>\n</blockquote>","id":"09d3da9a-777f-5779-ad9f-a4264bdba8a7","frontmatter":{"title":"Nginx als Reverse Proxy mit Cache und Apache2","date":"2012-06-16","tags":["nginx"]},"fields":{"slug":"/nginx-als-reverse-proxy-mit-cache-und-apache2/"},"timeToRead":3}}]}},"pageContext":{"tag":"nginx"}},"staticQueryHashes":["1134651766","2457448410","258428790","551055924"]}